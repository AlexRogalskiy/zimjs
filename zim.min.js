
// ZIM js Interactive Media modules by Dan Zen http://danzen.com (c) 2014
// zim.js includes all the basic zim coding modules http://zimjs.com
// free to use - donations welcome of course! http://zimjs.com/donate

function zid(e){return document.getElementById(e)}function zss(e){if(document.getElementById(e)){return document.getElementById(e).style}else if(zon)zog("zim wrap - zss(): id not found")}function zgo(e,t,n){if(zot(t)&&t!=""&&t!="_self"){window.location.href=e}else{if(zot(n)){window.open(e,"_blank")}else{window.open(e,"_blank","modal=yes,alwaysRaised=yes")}}}function zum(e){if(zot(e))return;return Number(String(e).replace(/[^\d\.\-]/g,""))}function zot(e){if(e===null)return true;return typeof e==="undefined"}function zop(e){if(zot(e))return;if(e.stopImmediatePropagation)e.stopImmediatePropagation();if(window.event)window.event.cancelBubble=true}function zil(){var e=function(e){if(!e)e=event;if(e.keyCode&&e.keyCode>=32&&e.keyCode<=40)e.preventDefault()};var t=function(e){if(!e)e=event;e.preventDefault()};var n=t;window.addEventListener("keydown",e);window.addEventListener("mousewheel",t);window.addEventListener("DOMMouseScroll",n);return[e,t,n]}if(typeof zon==="undefined")zon=false;var zog=console.log.bind(console);if(zon)zog("ZIM WRAP - zog zid zss zgo zum zot zop zil");var zim=function(e){if(zon)zog("ZIM CODE Module");e.shuffle=function(e){if(zot(e))return;var t=e.length,n,r;if(t==0)return e;while(--t){n=Math.floor(Math.random()*(t+1));r=e[t];e[t]=e[n];e[n]=r}return e};e.rand=function(e,t,n){if(zot(n))n=true;if(zot(t))t=0;if(zot(e))e=0;if(e>t){e++}else if(t>e){t++}var r;if(e==0&&t==0){return Math.random()}else if(t==0){r=Math.random()*e}else{r=Math.min(e,t)+Math.random()*(Math.max(e,t)-Math.min(e,t))}if(n){return Math.floor(r)}else{return r}};e.copy=function(t){if(t==null||typeof t!="object")return;if(t instanceof Array){return t.slice(0)}if(t instanceof Object){copy={};for(var n in t){if(t.hasOwnProperty(n))copy[n]=e.copy(t[n])}return copy}};e.arraysEqual=function(t,n,r){if(zot(t)||zot(n))return false;if(zot(r))r=true;if(t.length!=n.length)return false;for(var i=0;i<t.length;i++){if(t[i]instanceof Array&&n[i]instanceof Array){if(!e.arraysEqual(t[i],n[i],r))return false}else if(r&&t[i]!=n[i]){return false}else if(!r){return e.arraysEqual(t.sort(),n.sort(),true)}}return true};e.decimals=function(e,t){if(zot(e)||e==0)return 0;if(zot(t))t=1;return Math.round(e*Math.pow(10,t))/Math.pow(10,t)};e.Damp=function(e,t){if(zon)zog("zim code - Damp");this.lastValue=zot(e)?0:e;this.damp=zot(t)?.1:t};e.Damp.prototype.convert=function(e){return this.lastValue=this.lastValue+(e-this.lastValue)*this.damp};e.Proportion=function(e,t,n,r,i,s){if(zon)zog("zim code - Proportion");if(zot(n))n=0;if(zot(r))r=1;if(zot(i))i=1;if(zot(s))s=false;var o;var u;var a;o=e;this.convert=function(o){if(isNaN(o)){return}o=Math.max(o,e);o=Math.min(o,t);u=(o-e)/(t-e);if(i>0){a=n+(r-n)*u}else{a=r-(r-n)*u}if(s){a=Math.round(a)}return a}};e.ProportionDamp=function(e,t,n,r,i,s,o){function m(){if(isNaN(a)){return}a=Math.max(a,e);a=Math.min(a,t);f=(a-e)/(t-e);l=r-n;if(s>0){c=n+l*f}else{c=r-l*f}p=c;h=p-d;d+=h*u.damp;if(o){d=Math.round(d)}}if(zon)zog("zim code - ProportionDamp");if(zot(n))n=0;if(zot(r))r=1;if(zot(i))i=.1;if(zot(s))s=1;if(zot(o))o=false;this.damp=i;var u=this;var a;var f;var l;var c;var h;var p=0;var d=0;a=e;d=n;var v=setInterval(m,20);this.immediate=function(e){this.convert(e);m();d=c;if(o){d=Math.round(d)}};this.convert=function(e){a=e;return d};this.dispose=function(){clearInterval(v)}};e.scrollY=function(){var e=0;var t=navigator.appName;var n=navigator.userAgent.indexOf("Safari");if(n!=-1||t=="Safari"){var e=1}if(!e&&document.compatMode=="CSS1Compat"){return document.documentElement.scrollTop}else{return document.body.scrollTop}};e.windowWidth=function(){return isNaN(window.innerWidth)?window.clientWidth:window.innerWidth};e.windowHeight=function(){return isNaN(window.innerHeight)?window.clientHeight:window.innerHeight};e.urlEncode=function(e){var e=(e+"").toString();return encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")};e.urlDecode=function(e){return decodeURIComponent((e+"").replace(/\+/g,"%20"))};e.setCookie=function(e,t,n){if(n){var r=new Date;r.setTime(r.getTime()+n*24*60*60*1e3);var i="; expires="+r.toGMTString()}else{var i=""}document.cookie=e+"="+escape(t)+i+"; path=/"};e.getCookie=function(e){var t=document.cookie.split(/;\s*/);var n=new Array;var r;for(i=0;i<t.length;i++){r=t[i].split("=");n[r[0]]=r[1]}return unescape(n[e])};e.deleteCookie=function(t){e.setCookie(t,"",-1)};return e}(zim||{});var zim=function(e){if(zon)zog("ZIM CREATE Module");e.drag=function(t,n,r,i,s,o,u){function c(){a=0;f=0;if(u){n=e.boundsToGlobal(t.parent,n)}l=t.parent.localToGlobal(t.x,t.y);h(t,l.x,l.y)}function h(e,t,n){if(!e.parent)return;if(!e.getStage())return;var r=e.parent.globalToLocal(t,n);var i=p(r.x-a,r.y-f);e.x=i.x;e.y=i.y;e.getStage().update()}function p(e,r){if(n){var i=t.parent.localToGlobal(e,r);e=Math.max(n.x,Math.min(n.x+n.width,i.x));r=Math.max(n.y,Math.min(n.y+n.height,i.y));i=t.parent.globalToLocal(e,r);e=i.x;r=i.y}return{x:e,y:r}}if(zot(t)||!t.on)return;t.cursor=zot(r)?"pointer":r;if(zot(n))u=false;if(zot(s))s=false;if(zot(o))o=false;if(zot(u))u=false;var a;var f;var l;t.zimAdded=t.on("added",c,null,true);if(t.parent)c();t.zimDown=t.on("mousedown",function(e){var n=s?e.currentTarget:e.target;var r=n.parent.globalToLocal(e.stageX,e.stageY);a=r.x-e.target.x;f=r.y-e.target.y;t.cursor=zot(i)?"move":i;if(!o)e.stopImmediatePropagation()},true);t.zimMove=t.on("pressmove",function(e){var t=s?e.currentTarget:e.target;h(t,e.stageX,e.stageY)},true);t.zimUp=t.on("pressup",function(e){t.cursor=zot(r)?"pointer":r},true);return t};e.noDrag=function(e){if(zot(e)||!e.on)return;e.cursor="default";e.off("added",e.zimAdded);e.off("mousedown",e.zimDown);e.off("pressmove",e.zimMove);e.off("pressup",e.zimUp);return e};e.hitTestPoint=function(e,t,n){if(zot(e)||!e.globalToLocal)return;var r=e.globalToLocal(t,n);return e.hitTest(r.x,r.y)};e.hitTestReg=function(e,t){if(zot(e)||zot(t)||!e.localToLocal||!t.localToLocal)return;var n=t.localToLocal(t.regX,t.regY,e);return e.hitTest(n.x,n.y)};e.hitTestRect=function(e,t,n){if(zot(e)||zot(t)||!e.hitTest||!t.getBounds)return;if(zot(n))n=0;var r=t.getBounds();if(!r){zog("zim create - hitTestRect():\n please setBounds() on param b object");return}var i,s,o;for(var u=0;u<=n;u++){i=r.width*(u+1)/(n+1);s=r.height*(u+1)/(n+1);o=t.localToLocal(r.x+i,r.y,e);if(e.hitTest(o.x,o.y))return true;o=t.localToLocal(r.x+r.width,r.y+s,e);if(e.hitTest(o.x,o.y))return true;o=t.localToLocal(r.x+r.width-i,r.y+r.height,e);if(e.hitTest(o.x,o.y))return true;o=t.localToLocal(r.x,r.y+r.height-s,e);if(e.hitTest(o.x,o.y))return true}};e.hitTestCircle=function(e,t,n){if(zot(e)||zot(t)||!e.hitTest||!t.getBounds)return;if(zot(n))n=8;var r=t.getBounds();if(!r){zog("zim create - hitTestCircle():\n please setBounds() on param b object");return}var i=r.x+r.width/2;var s=r.y+r.height/2;var o=(r.width+r.height)/2/2;var u,a,f,l;for(var c=0;c<n;c++){u=c/n*2*Math.PI;a=i+o*Math.cos(u);f=s+o*Math.sin(u);l=t.localToLocal(a,f,e);if(e.hitTest(l.x,l.y))return true}};e.hitTestBounds=function(t,n,r){function l(e,t){if(e.x>=t.x+t.width||e.x+e.width<=t.x||e.y>=t.y+t.height||e.y+e.height<=t.y){return false}else{return true}}if(zot(t)||zot(n)||!t.getBounds||!n.getBounds)return;var i=false;if(r&&r.graphics)i=true;var s=t.getBounds();var o=n.getBounds();if(!s||!o){zog("zim create - hitTestBounds():\n please setBounds() on both objects");return}var u=e.boundsToGlobal(t);var a=e.boundsToGlobal(n);if(i){var f=r.graphics;f.clear();f.setStrokeStyle(1).beginStroke("blue");f.drawRect(u.x,u.y,u.width,u.height);f.beginStroke("green");f.drawRect(a.x,a.y,a.width,a.height);r.getStage().update()}return l(u,a)};e.boundsToGlobal=function(e,t){if(zot(e)||!e.getBounds)return;var n=e.getBounds();if(!n&&zot(t)){zog("zim create - boundsToGlobal():\n please setBounds() on object (or a rectangle)");return}if(t)n=t;var r=e.localToGlobal(n.x,n.y);var i=e.localToGlobal(n.x+n.width,n.y);var s=e.localToGlobal(n.x+n.width,n.y+n.height);var o=e.localToGlobal(n.x,n.y+n.height);var u=Math.min(r.x,i.x,s.x,o.x);var a=Math.min(r.y,i.y,s.y,o.y);var f=Math.max(r.x,i.x,s.x,o.x);var l=Math.max(r.y,i.y,s.y,o.y);return new createjs.Rectangle(u,a,f-u,l-a)};e.scale=function(e,t){if(zot(e)||!e.scaleX)return;if(zot(t))t=1;e.scaleX=e.scaleY=t;return e};e.scaleTo=function(t,n,r,i,s){if(zot(t)||!t.getBounds||!t.getBounds()){zog("zim create - scaleTo(): please provide an object (with setBounds) to scale");return}if(zot(n)||!n.getBounds||!n.getBounds()){zog("zim create - scaleTo(): please provide a boundObject (with setBounds) to scale to");return}if(zot(r))r=-1;if(zot(i))i=-1;if(r==-1&&i==-1)return t;if(zot(s))s="smallest";var o=n.getBounds().width*r/100;var u=n.getBounds().height*i/100;if((r==-1||i==-1)&&s!="both"&&s!="stretch"){if(r==-1){e.scale(t,u/t.getBounds().height)}else{e.scale(t,o/t.getBounds().width)}return t}if(s=="both"||s=="stretch"){t.scaleX=r!=-1?o/t.getBounds().width:t.scaleX;t.scaleY=i!=-1?u/t.getBounds().height:t.scaleY;return t}else if(s=="biggest"||s=="largest"||s=="outside"){var a=Math.max(o/t.getBounds().width,u/t.getBounds().height)}else{var a=Math.min(o/t.getBounds().width,u/t.getBounds().height)}e.scale(t,a);return t};e.move=function(t,n,r,i,s,o,u,a,f){return e.animate(t,{x:n,y:r},i,s,o,u,a,f)};e.animate=function(e,t,n,r,i,s,o,u){function f(){if(i&&typeof i==="function"){i(s)}createjs.Ticker.off("tick",a)}if(zot(e)||!e.on||zot(t))return;if(zot(r))r="quadInOut";if(zot(o))o=0;if(zot(u))u={override:true};createjs.Tween.get(e,u).wait(o).to(t,n,createjs.Ease[r]).call(f);var a=createjs.Ticker.on("tick",stage);return e};e.fit=function(e,t,n,r,i,s){if(zot(e)||!e.getBounds)return;if(!e.getBounds()){zog("zim create - fit(): please setBounds() on object");return}if(zot(t)){if(!e.getStage()){zog("zim create - fit(): please add boundary dimensions or add obj to stage first");return}if(!e.getStage().getBounds()){zog("zim create - fit(): please add boundary dimensions or add obj with bounds to stage first");return}var o=e.getStage().getBounds().width;var u=e.getStage().getBounds().height;t=0;n=0;r=o;i=u}if(zot(s))s=true;e.scaleX=e.scaleY=1;var a=r;var f=i;var l=e.getBounds().width;var c=e.getBounds().height;var h;if(s){if(a/f>=l/c){h=f/c}else{h=a/l}}else{if(a/f>=l/c){h=a/l}else{h=f/c}}e.scaleX=e.scaleY=h;var p=l*h;var d=c*h;e.x=t+(a-p)/2;e.y=n+(f-d)/2;return{x:e.x,y:e.y,width:p,height:d,scale:h,bX:t,bY:n,bWidth:r,bHeight:i}};e.outline=function(e,t,n){if(zot(e)||!e.getBounds){zog("zim create - outline(): please provide object and shape");return}if(!e.getBounds()){zog("zim create - outline(): please setBounds() on object");return}if(!e.parent){zog("zim create - outline(): object should be on stage first");return}if(zot(t))t="brown";if(zot(n))n=2;var r=e.getBounds();var i=new createjs.Shape;var s=e.parent;var o=e.localToLocal(r.x,r.y,s);var u=e.localToLocal(r.x+r.width,r.y,s);var a=e.localToLocal(r.x+r.width,r.y+r.height,s);var f=e.localToLocal(r.x,r.y+r.height,s);var l=i.graphics;l.s(t).ss(n).r(o.x,o.y,u.x-o.x,a.y-u.y);zero={x:o.x-r.x*e.scaleX,y:o.y-r.y*e.scaleY};var c=10;var h=c+1;l.s("white").ss(n+2);l.mt(zero.x-h,zero.y+0).lt(zero.x+h,zero.y+0);l.mt(zero.x+0,zero.y-h).lt(zero.x+0,zero.y+h);l.s(t).ss(n);l.mt(zero.x-c,zero.y+0).lt(zero.x+c,zero.y+0);l.mt(zero.x+0,zero.y-c).lt(zero.x+0,zero.y+c);l.s("white").ss(n+2).dc(e.x,e.y,c+6);l.s(t).ss(n).dc(e.x,e.y,c+6);e.parent.addChild(i);if(e.getStage())e.getStage().update();return e};return e}(zim||{});var zim=function(e){if(zon)zog("ZIM BUILD Module");e.Triangle=function(t,n,r,i,s,o,u,a){function f(){if(zot(t))t=100;if(zot(n))n=t;if(zot(r))r=t;if(zot(i))i="black";if(zot(u))u=true;if(zot(a))a=0;var e=[t,n,r];e.sort(function(e,t){return t-e});aa=e[0];bb=e[1];cc=e[2];if(aa>bb+cc){zog("zim build - Triangle(): invalid triangle lengths");return}var f=new createjs.Shape;var l=f.graphics;l.f(i);if(!zot(s)){l.s(s);if(zot(o))o=1;l.ss(o)}l.mt(0,0);l.lt(t,0);var h=Math.acos((Math.pow(bb,2)+Math.pow(cc,2)-Math.pow(aa,2))/(2*bb*cc))*180/Math.PI;var p=Math.asin(bb*Math.sin(h*Math.PI/180)/aa)*180/Math.PI;var d=180-h-p;var v;if(r==aa){v=h}else if(r==bb){v=p}else{v=d}var m=Math.cos(v*Math.PI/180)*n;var g=Math.sin(v*Math.PI/180)*n;f.width=Math.max(t,t-m);f.height=g;f.setBounds(0,0,f.width,-f.height);l.lt(t-m,0-g);l.lt(0,0);if(u){f.regX=f.width/2;f.regY=-f.height/2+a}return f}f.prototype=new createjs.Shape;f.constructor=e.Triangle;return new f};e.Label=function(t,n,r,i,s,o,u){function a(){if(zot(t))t="LABEL";if(t=="")t=" ";if(zot(n))n=36;if(zot(r))r="arial";if(zot(i))i="black";if(zot(s))s=i;if(zot(o))o=null;if(zot(u))u=16;var a=this;this.mouseChildren=false;var f=this.label=new createjs.Text(String(t),n+"px "+r,i);f.textBaseline="alphabetic";f.textAlign="left";if(o&&u>0)f.shadow=new createjs.Shadow(o,3,3,u);this.addChild(f);var l=new createjs.Shape;l.graphics.f("rgba(0,255,255,.01)").r(0,0,this.getBounds().width,this.getBounds().height);this.addChildAt(l,0);this.setBounds(0,0,this.getBounds().width,this.getBounds().height);f.y=n-n/6;Object.defineProperty(a,"text",{get:function(){var e=f.text==" "?"":f.text;return e},set:function(e){f.text=e}});this.showRollColor=function(e){if(zot(e))e=true;if(e){f.color=s}else{f.color=i}if(a.getStage())a.getStage().update()};this.on("mouseover",function(e){a.showRollColor()});this.on("mouseout",function(e){a.showRollColor(false)});this.clone=function(){return new e.Label(a.text,n,r,i,s,o,u)};this.dispose=function(){a.removeAllEventListeners()}}a.prototype=new createjs.Container;a.constructor=e.Label;return new a};e.Button=function(t,n,r,i,s,o,u,a,f,l){function c(){function d(e){p.on("mouseout",v);var r=c.graphics;r.clear();r.f(s);if(o)r.s(o).ss(u);r.rr(0,0,t,n,a);p.label.showRollColor();if(p.getStage())p.getStage().update()}function v(e){p.off("mouseout",v);var r=c.graphics;r.clear();r.f(i);if(o)r.s(o).ss(u);r.rr(0,0,t,n,a);p.label.showRollColor(false);if(p.getStage())p.getStage().update()}if(zot(t))t=200;if(zot(n))n=60;if(zot(i))i="#C60";if(zot(s))s="#F93";if(zot(o))o=null;if(zot(u))u=1;if(zot(a))a=20;if(zot(f))f="#666";if(zot(l))l=16;if(zot(r))r="PRESS";if(typeof r==="string"||typeof r==="number")r=new e.Label(r,36,"arial","white");this.mouseChildren=false;this.cursor="pointer";var c=new createjs.Shape;var h=c.graphics;h.f(i);if(o)h.s(o).ss(u);h.rr(0,0,t,n,a);this.addChild(c);this.backing=c;if(l>0)c.shadow=new createjs.Shadow(f,3,3,l);this.setBounds(0,0,t,n);this.width=t;this.height=n;r.x=(t-r.getBounds().width)/2+1;r.y=(n-r.getBounds().height)/2+2;this.addChild(r);this.label=r;this.on("mouseover",d);var p=this;this.dispose=function(){p.removeAllEventListeners();p.removeChild(c);p.removeChild(buttonLabel);c=null;buttonLabel=null}}c.prototype=new createjs.Container;c.constructor=e.Button;return new c};e.CheckBox=function(t,n,r,i,s){function o(){function d(e){o=!o;u.setChecked(o);u.dispatchEvent("change")}if(zot(t))t=60;if(zot(n))n=null;if(typeof n==="string"||typeof n==="number")n=new e.Label(n,t*5/6,"arial",i);var o=zot(r)?false:r;if(zot(i))i="black";if(zot(s))s=10;this.setBounds(-s,-s,t+s*2,t+s*2);var u=this;this.cursor="pointer";var a=new createjs.Shape;var f=a.graphics;f.f("rgba(0,0,0,.01)").r(this.getBounds().x,this.getBounds().y,this.getBounds().width,this.getBounds().height);f.f("rgba(255,255,255,.5)").r(0,0,t,t);f.s(i).ss(t/10).r(t/7,t/7,t-t/7*2,t-t/7*2);this.addChild(a);if(n){this.addChild(n);n.x=this.getBounds().width;n.y=t/8;this.label=n}var l=new createjs.Shape;var c=l.graphics;c.f(i).p("AnQAdICBiaIEEDZIF8nfICfB4In/KPg");var h=95;l.setBounds(-h/2,-h/2,h,h);var p=t/(h+66);l.scaleX=l.scaleY=p;l.x=t/2;l.y=t/2;if(o)this.addChild(l);this.on("click",d);Object.defineProperty(u,"checked",{get:function(){return o},set:function(e){u.setChecked(e)}});this.setChecked=function(e){if(zot(e))e=true;o=e;if(o){u.addChild(l)}else{u.removeChild(l)}if(u.getStage())u.getStage().update()};this.dispose=function(){u.removeAllEventListeners()}}o.prototype=new createjs.Container;o.constructor=e.CheckBox;return new o};e.RadioButtons=function(t,n,r,i,s,o){function u(){function l(e){u.setSelected(f.getChildIndex(e.target));u.dispatchEvent("change")}function h(){var o;var l=false;for(var c=n.length-1;c>=0;c--){o=n[c];if(o.selected&&o.selected===true){if(!l){l=true}else{o.selected="false"}}}f.removeAllChildren();var h;var d=0;for(var c=0;c<n.length;c++){o=n[c];if(typeof o==="string"||typeof o==="number"){var v={selected:false,label:new e.Label(o,t*5/6,"arial",i)};o=v}if(o.label&&typeof o.label==="string"||typeof o.label==="number"){o.label=new e.Label(o.label,t*5/6,"arial",i)}u.labels.push(o.label);o.index=c;h=p(o.selected,o.label);h.obj=o;if(o.selected)a=h.obj;f.addChild(h);if(r){h.y=d;d+=h.getBounds().height+s}else{h.x=d;d+=h.getBounds().width+s}}}function p(e,n){var r=new createjs.Container;r.mouseChildren=false;r.setBounds(-o,-o,t+o*2,t+o*2);var s=new createjs.Shape;var a=s.graphics;a.f("rgba(0,0,0,.01)").r(r.getBounds().x,r.getBounds().y,r.getBounds().width,r.getBounds().height);a.f("rgba(255,255,255,.5)").dc(t/2,t/2,t/1.85);a.s(i).ss(t/9).dc(t/2,t/2,t/2-t/2/5);r.addChild(s);var f=r.check=new createjs.Shape;f.mouseEnabled=false;f.alpha=.95;var l=f.graphics;l.f(i).dc(t/2,t/2,t/5.2);if(n){r.addChild(n);n.x=r.getBounds().width;n.y=t/8;u.label=n;r.setBounds(-o,-o,t+o*2+n.getBounds().width,Math.max(t+o*2,n.getBounds().height))}if(e)r.addChild(f);return r}if(zot(t))t=60;t=Math.max(5,t);if(zot(n))return;if(zot(r))r=true;if(zot(i))i="black";if(zot(s))s=r?t*.2:t;if(zot(o))o=t/5;var u=this;this.cursor="pointer";this.labels=[];var a;var f=this.buttons=new createjs.Container;this.addChild(f);f.on("click",l);h();var c;if(!this.getBounds())this.setBounds(0,0,t,t);this.setBounds(0,0,this.getBounds().width+o,this.getBounds().height+o);this.setSelected=function(e){function i(){}if(zot(e))e=-1;if(e!=-1&&!f.getChildAt(e))return;var t;for(var n=0;n<f.getNumChildren();n++){t=f.getChildAt(n);t.removeChild(t.check)}if(e>=0){t=f.getChildAt(e);var r=-2;if(a)r=a.index;a=t.obj}if(e==-1||r==a.index){a=null;u.id=null;u.label=null;u.text=""}else{t.addChild(t.check);u.id=a.id;u.label=a.label;if(u.label)u.text=u.label.text}if(u.getStage())u.getStage().update()};Object.defineProperty(u,"selected",{get:function(){return a},set:function(e){selectedIndex=e}});Object.defineProperty(u,"selectedIndex",{get:function(){return a?a.index:-1},set:function(e){this.setSelected(e)}});this.dispose=function(){u.removeAllEventListeners()}}u.prototype=new createjs.Container;u.constructor=e.RadioButtons;return new u};e.Pane=function(t,n,r,i,s,o,u,a,f,l,c,h){function p(){function b(e,i){e=Math.max(n/2,Math.min(t.getBounds().width-n/2,e));i=Math.max(r/2,Math.min(t.getBounds().height-r/2,i));return{x:e,y:i}}if(zot(t)||!t.getBounds){zog("zim build - Pane(): Please pass in a reference to a container with bounds set as first parameter");return}if(!t.getBounds()){zog("zim build - Pane(): Please give the container bounds using setBounds()");return}if(zot(t.getStage)){zog("zim build - Pane(): Please give the container that has a stage property");return}if(zot(n))n=200;if(zot(r))r=200;if(zot(i))i=null;if(typeof i==="string"||typeof i==="number")i=new e.Label(i,40,"arial","black");if(zot(s))s="white";if(zot(o))o=false;if(zot(u))u=false;if(zot(a))a=true;if(zot(f))f=20;if(zot(l))l=.14;if(zot(c))c="#333";if(zot(h))h=20;var p=this.backing=new createjs.Shape;var d=p.graphics;d.beginFill("black");d.drawRect(-5e3,-5e3,1e4,1e4);this.setBounds(-n/2,-r/2,n,r);p.alpha=l;var v=this;p.on("click",function(e){v.hide();v.dispatchEvent("close");e.stopImmediatePropagation()});p.on("mousedown",function(e){e.stopImmediatePropagation()});if(a)this.addChild(p);var m=this.display=new createjs.Shape;m.setBounds(0,0,n,r);m.regX=n/2;m.regY=r/2;d=m.graphics;d.beginFill(s);d.drawRoundRect(0,0,n,r,f);if(h>0)m.shadow=new createjs.Shadow(c,8,8,h);m.on("click",function(e){e.stopImmediatePropagation()});this.resetX;this.resetY;if(o){m.cursor="pointer";var g,y;m.on("mousedown",function(e){if(isNaN(v.resetX))v.resetX=v.x;if(isNaN(v.resetY))v.resetY=v.y;g=e.stageX-v.x;y=e.stageY-v.y;m.cursor="move"});m.on("pressmove",function(e){var n=b(e.stageX-g,e.stageY-y);v.x=n.x;v.y=n.y;t.getStage().update()});this.on("pressup",function(e){m.cursor="pointer"})}this.addChild(m);if(i){i.x=-i.getBounds().width/2;i.y=-i.getBounds().height/2;this.addChild(i);this.label=i;this.text=i.text}this.hide=function(){t.removeChild(v);t.getStage().update();if(u){if(!isNaN(v.resetX))v.x=v.resetX;if(!isNaN(v.resetY))v.y=v.resetY}};this.show=function(){v.x=t.getBounds().width/2;v.y=t.getBounds().height/2;t.addChild(v);t.getStage().update()};this.dispose=function(){m.removeAllEventListeners();v.removeChild(m);m=null}}p.prototype=new createjs.Container;p.constructor=e.Pane;return new p};e.Waiter=function(t,n,r,i,s,o,u){function a(){if(zot(t)||!t.getBounds){zog("zim build - Waiter(): Please pass in a reference to a container with bounds set as first parameter");return}if(!t.getBounds()){zog("zim build - Waiter(): Please give the container bounds using setBounds()");return}if(zot(t.getStage)){zog("zim build - Waiter(): Please give the container that has a stage property");return}if(zot(n))n=600;if(zot(r))r="orange";if(zot(i))i="white";if(zot(s))s=16;if(zot(o))o="#444";if(zot(u))u=14;var e=40;var a=3;var f=e*.6/2;var l=(e-f*2)/2;var c=a*(f*2+l)+l;this.setBounds(-c/2,-e/2,c,e);var h=this;var p=this.display=new createjs.Shape;this.addChild(p);p.setBounds(0,0,c,e);p.regX=c/2;p.regY=e/2;g=p.graphics;g.beginFill(r);g.drawRoundRect(0,0,c,e,s);if(u>0)p.shadow=new createjs.Shadow(o,3,3,u);p.on("click",function(e){e.stopImmediatePropagation()});var d=new createjs.Container;this.addChild(d);var v;for(var m=0;m<a;m++){v=new createjs.Shape;v.graphics.f(i).dc(0,0,f);v.x=(m-(a-1)/2)*(f*2+l);d.addChild(v);v.cache(-f,-f,f*2,f*2);v.alpha=0}t.getStage().update();this.hide=function(){createjs.Tween.get(h,{override:true}).to({alpha:0},300).call(function(){createjs.Ticker.off("tick",h.ticker);t.removeChild(h);t.getStage().update()})};this.show=function(){var e;var r=0;for(var i=0;i<d.getNumChildren();i++){h.alpha=0;createjs.Tween.get(h,{override:true}).to({alpha:1},300);setTimeout(function(){e=d.getChildAt(r);createjs.Tween.get(e,{loop:true}).to({alpha:1},n/a/2).wait(n/a).to({alpha:0},n/a).wait(n-n/a-n/a/2);r++},i*n/a)}h.ticker=createjs.Ticker.on("tick",function(){t.getStage().update()});h.x=t.getBounds().width/2;h.y=t.getBounds().height/2;t.addChild(h);t.getStage().update()};this.dispose=function(){p.removeAllEventListeners();h.removeChild(p);h.removeChild(d);p=null;d=null}}a.prototype=new createjs.Container;a.constructor=e.Waiter;return new a};e.Parallax=function(t,n,r){function l(e){var n;var r;var i;var s;for(var o=0;o<u.length;o++){n=u[o];s=n.parent.localToGlobal(n.zimsX,n.zimsY);r=s.x;i=s.y;if(n.zimX!=0){r=r-n.zimX/2+n.zimpX.convert(t.mouseX)}if(n.zimY!=0){i=i-n.zimY/2+n.zimpY.convert(t.mouseY)}s=n.parent.globalToLocal(r,i);n.x=s.x;n.y=s.y}t.update()}if(zon)zog("zim build - Parallax");if(zot(t)||!t.getBounds){zog("zim build - Parallax(): please pass in the stage with bounds as first parameter");return}if(!t.getBounds()){zog("zim build - Pane(): Please give the stage bounds using setBounds()");return}var i=t.getBounds().width;var s=t.getBounds().height;var o=this;this.damp=zot(n)?.1:n;this.addLayer=function(t,n,r){if(zot(t))return;t.zimX=zot(n)?0:n;t.zimY=zot(r)?0:r;if(t.zimX!=0){t.zimpX=new e.ProportionDamp(0,i,0,t.zimX,o.damp)}if(t.zimY!=0){t.zimpY=new e.ProportionDamp(0,s,0,t.zimY,o.damp)}t.zimsX=t.x;t.zimsY=t.y;u.push(t)};this.dispose=function(){u=null;createjs.Ticker.off("tick",f)};r=zot(r)?[]:r;var u=[];for(var a=0;a<r.length;a++){this.addLayer(r[a][0],r[a][1],r[a][2])}var f=createjs.Ticker.on("tick",l);createjs.Ticker.setFPS(60)};e.Scroller=function(e,t,n,r,i,s){function l(n){if(!e.getStage())return;if(!e.getStage().getBounds()){zog("zim build - Scroller(): please setBounds() on stage");return}if(!u){u=e.getStage().getBounds().width;a=e.getStage().getBounds().height}if(o.speed==0||o.direction==0){return}if(i){e.x-=o.speed*o.direction;t.x-=o.speed*o.direction;if(o.direction*o.speed>0){if(t.x<0&&e.x<t.x){e.x=t.getBounds().width-o.gapFix}else if(e.x<0&&t.x<e.x){t.x=e.getBounds().width-o.gapFix}}else{if(t.x>u&&t.x>e.x){t.x=e.x-e.getBounds().width+o.gapFix}else if(e.x>u&&e.x>t.x){e.x=t.x-t.getBounds().width+o.gapFix}}}else{e.y-=o.speed*o.direction;t.y-=o.speed*o.direction;if(o.direction*o.speed>0){if(t.y<0&&e.y<t.y){e.y=t.getBounds().height-o.gapFix}else if(e.y<0&&t.y<e.y){t.y=e.getBounds().height-o.gapFix}}else{if(t.y>a&&t.y>e.y){t.y=e.y-e.getBounds().height+o.gapFix}else if(e.y>a&&e.y>t.y){e.y=t.y-t.getBounds().height+o.gapFix}}}e.getStage().update()}if(zon)zog("zim build - Scroller");if(zot(e)||!e.getBounds||zot(t)||!t.getBounds)return;if(zot(i))i=true;var o=this;this.speed=zot(n)?1:n;this.direction=zot(r)?1:r;this.gapFix=zot(s)?0:s;if(!e.getBounds()||!t.getBounds()){zog("zim build - Scroller(): please setBounds() on backing objects");return}if(!e.getStage()){zog("zim build - Scroller(): please add backing objects to stage to start");return}var u;var a;if(i){t.x=e.getBounds().width}else{t.y=e.getBounds().height}var f=createjs.Ticker.on("tick",l);createjs.Ticker.setFPS(60);this.dispose=function(){if(zon)zog("bye from Scroller");createjs.Ticker.off("tick",f)}};return e}(zim||{});var zim=function(e){if(zon)zog("ZIM PAGES Module");e.Swipe=function(t,n,r){function i(){if(zot(t)||!t.on){zog("zim pages - Swipe():\nPlease pass in object");return}if(zot(n))n=50;if(zot(r))r=100;this.distance=n;this.duration=r;this.active=true;var e;var i;var s;var o;var u;var a;var f=this;t.on("mousedown",function(n){if(!f.active)return;f.obj=n.target;e=n.stageX;i=n.stageY;u=true;clearTimeout(a);a=setTimeout(function(){if(u){if(Math.abs(s-e)>Math.abs(o-i)){if(s-e>f.distance){f.direction="right";f.dispatchEvent("swipe");u=false}if(e-s>f.distance){f.direction="left";f.dispatchEvent("swipe");u=false}}else{if(o-i>f.distance){f.direction="down";f.dispatchEvent("swipe");u=false}if(i-o>f.distance){f.direction="up";f.dispatchEvent("swipe");u=false}}}},f.duration);t.on("pressmove",function(e){s=e.stageX;o=e.stageY});t.on("pressup",function(e){if(u){f.direction="none";f.dispatchEvent("swipe")}u=false;clearTimeout(a)})});this.disable=function(){f.active=false};this.enable=function(){f.active=true}}i.prototype=new createjs.EventDispatcher;i.prototype.constructor=e.Swipe;return new i};e.Pages=function(t,n,r,i,s){function o(){function h(){l=new createjs.Shape;l.graphics.f("black").r(0,0,u,a+1);c=new createjs.Shape;c.graphics.f("white").r(0,0,u,a+1)}if(zot(t)||!t.getBounds||!t.getBounds()){zog("zim pages - Pages():\nobject must have bounds set");return}if(zot(n))n=[];if(zot(r))r="none";if(zot(i))i=200;if(zot(s))s=[];this.transitionTable=s;this.speed=i;this.active=true;var o=this;var u=t.getBounds().width;var a=t.getBounds().height;var f=this.page=n[0]?n[0].page:null;var l;var c;if(r!="none"||s!=[])h();var p=["left","right","up","down"];var d;var v;for(var m=0;m<n.length;m++){d=n[m];d.page.zimSwipeArray=d.swipe?d.swipe:[]}this.addChild(f);this.swipe=new e.Swipe(t);var g;var y=false;var b=this.swipe.on("swipe",function(e){if(!o.active)return;var t=e.currentTarget.direction;if(t=="none")return;var n="";if(t=="left")n="right";else if(t=="right")n="left";else if(t=="up")n="down";else if(t=="down")n="up";t=n;var r=p.indexOf(t);v=f.zimSwipeArray[r];g=[v,t,null,null,true];o.page=f;o.nextPage=v;o.direction=t;o.dispatchEvent("swipe");setTimeout(function(){if(!y){o.go(v,t,null,null,true)}},100)});this.addPage=function(e,t){if(zot(t))t=[];var n={page:e,swipe:t};n.page.zimSwipeArray=n.swipe?n.swipe:[];if(!f){f=o.page=n.page;o.addChild(f)}};this.removePage=function(e){if(o.currentPage==e){o.removeChild(e);if(t.getStage())t.getStage().update()}e.zimSwipeArray=null};this.setSwipe=function(e,t){if(zot(t))t=[];var n={page:e,swipe:t};n.page.zimSwipeArray=n.swipe?n.swipe:[]};this.pause=function(){y=true};this.unpause=function(){if(y)o.go(g[0],g[1],g[2],g[3],g[4])};this.go=function(n,s,h,d,v){setTimeout(function(){y=false},200);var m=[{x:u},{x:-u},{y:a},{y:-a}];var g=[{x:0},{x:0},{y:0},{y:0}];var b=[{x:u/2,alpha:0},{x:-u/2,alpha:0},{y:a/2,alpha:0},{y:-a/2,alpha:0}];var w=r;var E=i;for(var S=0;S<o.transitionTable.length;S++){if(o.transitionTable[S][0]==f&&o.transitionTable[S][1]==n){w=o.transitionTable[S][2];E=o.transitionTable[S][3];break}}if(zot(h))h=w;if(zot(d))d=E;o.speed=d;o.direction=s;if(n==""||n==null){o.page=f;o.dispatchEvent("nothing")}else if(typeof n==="string"){o.page=f;o.dispatchEvent(n)}else{if(n==f)return;if(zot(s))s="right";var x=p.indexOf(s);function T(e){e[0].uncache();e[1].uncache();o.dispatchEvent("pageTransitioned");o.removeChild(o.lastPage);o.removeChild(l);o.removeChild(c)}function N(t){o.removeChild(o.lastPage);e.animate(t.unshift(),{alpha:0},o.speed/2,null,T,t)}n.x=0;n.y=0;n.alpha=1;if(h=="slide"){n.x=-(m[x].x|0);n.y=-(m[x].y|0);n.cache(0,0,u+1,a+1);f.cache(0,0,u+1,a+1);o.addChild(n);o.addChild(f);e.animate(f,m[x],o.speed,null,T,[f,n]);e.animate(n,g[x],o.speed)}else if(h=="reveal"){n.cache(0,0,u+1,a+1);f.cache(0,0,u+1,a+1);o.addChild(n);o.addChild(f);e.animate(f,b[x],o.speed,null,T,[f,n])}else if(h=="fade"){n.cache(0,0,u+1,a+1);f.cache(0,0,u+1,a+1);n.alpha=1;o.addChild(n);o.addChild(f);e.animate(f,{alpha:0},o.speed,null,T,[f,n])}else if(h=="black"){n.cache(0,0,u+1,a+1);f.cache(0,0,u+1,a+1);n.alpha=1;o.addChild(n);o.addChild(f);l.alpha=0;o.addChild(l);e.animate(l,{alpha:1},o.speed/2,null,N,[l,f,n])}else if(h=="white"){n.cache(0,0,u+1,a+1);f.cache(0,0,u+1,a+1);n.alpha=1;o.addChild(n);o.addChild(f);c.alpha=0;o.addChild(c);e.animate(c,{alpha:1},o.speed/2,null,N,[c,f,n])}else{o.addChild(n);o.removeChild(f)}o.lastPage=f;o.page=n;if(zot(v))v=false;o.fromSwipe=v;o.dispatchEvent("page");f=n;if(t.getStage())t.getStage().update()}};this.resize=function(){u=t.getBounds().width;a=t.getBounds().height;if(r!="none"||s!=[])h()};this.puff=function(e){for(var t=0;t<n.length;t++){o.addChild(n[t].page)}o.addChild(f);if(e>0){setTimeout(function(){o.settle()},e)}};this.settle=function(){o.removeAllChildren();o.addChild(f);o.dispatchEvent("puffed")};this.disable=function(){o.active=false};this.enable=function(){o.active=true};this.dispose=function(){o.swipe.off("swipe",b);o.removeAllChildren();n=null}}o.prototype=new createjs.Container;o.prototype.constructor=e.Pages;return new o};e.HotSpots=function(t,n,r){function i(){function f(t){var i=null;if(!Array.isArray(t.rect)){i=t.rect;if(!i){zog("zim pages - HotSpots(): HotSpot "+t.page+" "+t.rect+" button does not exist");return}if(!i.getBounds()){zog("zim pages - HotSpots(): HotSpots button needs bounds");return}t.rect=[i.x,i.y,i.getBounds().width,i.getBounds().height]}o=new e.HotSpot(t.page,t.rect[0],t.rect[1],t.rect[2],t.rect[3],t.call,n);o.zimHSpage=t.page;o.button=i;u.push(o);o.on("click",l);if(i){o.spot.mouseEnabled=false;o.spot.mouseChildren=false;i.zimHScall=t.call;i.zimHSEvent=i.on("click",l);if(!r){i.zimHSMDEvent=i.on("mousedown",function(e){e.stopImmediatePropagation()})}i.cursor="pointer"}}function l(e){if(typeof e.currentTarget.zimHScall=="function"){e.currentTarget.zimHScall()}}if(zot(t)||!Array.isArray(t)){zog("zim pages - HotSpots():\nplease provide an array of HotSpot data");return}if(zot(n))n=true;if(zot(r))r=false;var i=this;var s;var o;var u=[];for(var a=0;a<t.length;a++){f(t[a])}this.addHotSpot=function(e,n,r){s={page:e,rect:n,call:r};t.push(s);f(s)};this.show=function(){for(var e=0;e<u.length;e++){o=u[e];if(!o.button)o.show()}};this.hide=function(){for(var e=0;e<u.length;e++){o=u[e];o.hide()}};this.removeHotSpots=function(n,r){for(var i=t.length-1;i>=0;i--){s=t[i];o=u[i];if(r&&!Array.isArray(r)){r=[r.x,r.y,r.getBounds().width,r.getBounds().height]}if(zot(n)&&zot(r)||zot(r)&&n==s.page||zot(n)&&e.arraysEqual(r,s.rect)||n==s.page&&e.arraysEqual(r,s.rect)){t.splice(i,1);if(o.button){o.button.off("click",o.button.zimHSEvent);o.button.zimHSEvent=null}o.off("click",l);o.dispose();u.splice(i,1)}}};this.dispose=function(){for(var e=0;e<u.length;e++){o=u[e];if(o.button){o.button.off("click",o.button.zimHSEvent);o.button.zimHSCall=null;o.button.zimHSEvent=null}o.off("click",l);o.dispose()}}}i.prototype=new createjs.Container;i.prototype.constructor=e.HotSpots;return new i};e.HotSpot=function(t,n,r,i,s,o,u){function a(){if(zot(t)||!t.addChild){zog("zim pages - HotSpot():\nPlease pass in container object for obj");return}if(t instanceof createjs.Container==false)zog("zim build - HotSpot():\nObjects passed in should be Containers");if(zot(u))u=true;var e=this;var a=new createjs.Shape;this.spot=a;if(!u){var f=t.globalToLocal(n,r);var l=t.globalToLocal(n+i,r+s);var c=l.x-f.x;var p=l.y-f.y;a.graphics.f("#999999").dr(f.x,f.y,c,p)}else{a.graphics.f("#999999").dr(n,r,i,s)}a.alpha=.01;a.cursor="pointer";var d=a.on("click",function(){if(typeof o=="function"){o()}});t.addChild(a);this.show=function(){a.alpha=.5};this.hide=function(){a.alpha=.01};this.dispose=function(){a.off("click",d);t.removeChild(a);delete a}}a.prototype=new createjs.Container;a.prototype.constructor=e.HotSpot;return new a};e.dashedLinesOn=function(){if(e.dashed)return;e.dashed=true;createjs.Graphics.prototype.dashedLineTo=function(e,t,n,r,i){this.moveTo(e,t);var s=n-e;var o=r-t;var u=Math.floor(Math.sqrt(s*s+o*o)/i);var a=s/u;var f=o/u;var l=0;while(l++<u){e+=a;t+=f;this[l%2==0?"moveTo":"lineTo"](e,t)}this[l%2==0?"moveTo":"lineTo"](n,r);return this};createjs.Graphics.prototype.drawDashedRect=function(e,t,n,r,i){this.moveTo(e,t);var s=e+n;var o=t+r;this.dashedLineTo(e,t,s,t,i);this.dashedLineTo(s,t,s,o,i);this.dashedLineTo(s,o,e,o,i);this.dashedLineTo(e,o,e,t,i);return this}};e.Manager=function(e){if(zon&&e)zog("zim pages - "+e);var t=this;this.items=[];this.add=function(e){t.items.push(e)};this.resize=function(){if(!t)return;for(var e=0;e<t.items.length;e++){if(!t.items[e].resize())t.items.splice(e)}};this.dispose=function(){for(var n=0;n<t.items.length;n++){t.items[n].dispose()}t.items=[];if(zon)zog("zim pages - "+e+" - all disposed");t=null}};e.Guide=function(t,n,r,i,s){function o(){function m(e,t,n){var r=new createjs.Container;r.shape=new createjs.Shape;r.shape.graphics.s(t).ss(1).f(e).r(0,0,f,l);r.shape.alpha=.9;r.addChild(r.shape);r.label=new createjs.Text("10","16px verdana",n);r.label.textAlign="center";r.label.textBaseline="middle";r.addChild(r.label);r.mouseChildren=false;r.mouseEnabled=false;return r}function x(){clearInterval(g);if(t=="stage"){u=o.getStage();t=u}else{u=t.getStage()}b=t.getBounds().width;w=t.getBounds().height;if(n){v.y=w/2;v.label.text="y:"+(o.pixels?Math.round(b*70/100):"70%")}else{v.x=b/2;v.label.text="x:"+(o.pixels?Math.round(w*70/100):"70%")}E=new createjs.Shape;o.addChild(E);n?E.x=b*.7:E.y=w*.7;if(!y){t.addChild(o);C()}u.off("stagemousemove",a);a=u.on("stagemousemove",N);u.update()}function N(e){var i;var s;if(e){i=t.globalToLocal(e.rawX,e.rawY);T=i}else{i={x:T.x,y:T.y}}if(!r){if(n){s=Math.round(Math.abs(i.x-E.x));v.label.text="x:"+Math.max(0,Math.min(s,Math.round(b)));v.y=Math.max(h,Math.min(i.y,d))}else{s=Math.round(Math.abs(i.y-E.y));v.label.text="y:"+Math.max(0,Math.min(s,Math.round(w)));v.x=Math.max(c,Math.min(i.x,p))}}else{if(n){s=Math.round(Math.abs(i.x-E.x)/b*100);v.label.text="x:"+Math.max(0,Math.min(s,100))+"%";v.y=Math.max(h,Math.min(i.y,d))}else{s=Math.round(Math.abs(i.y-E.y)/w*100);v.label.text="y:"+Math.max(0,Math.min(s,100))+"%";v.x=Math.max(c,Math.min(i.x,p))}}if(u)u.update()}function C(){y=true;b=t.getBounds().width;w=t.getBounds().height;var r;if(n){r="ew-resize";S=new createjs.Rectangle(0,0,b,0)}else{r="ns-resize";S=new createjs.Rectangle(0,0,0,w)}e.noDrag(E);setTimeout(function(){e.drag(E,S,r,r,null,null,true)},500);u.mouseMoveOutside=true;u.enableMouseOver(10);p=b-f*2/3;d=w-l-l;E.uncache();var i=E.graphics;if(n){i.c().s("rgba(0,255,255,.1)").ss(20).mt(0,0).lt(0,w);i.f().s("white").ss(2).mt(0,0).lt(0,w);i.s("#00c5af").ss(2).dashedLineTo(0,0,0,w,20);E.cache(-10,0,20,w)}else{i.c().s("rgba(255,0,255,.1)").ss(20).mt(0,0).lt(b,0);i.f().s("white").ss(2).mt(0,0).lt(b,0);i.s("#d61fa0").ss(2).dashedLineTo(0,0,b,0,20);E.cache(0,-10,b,20)}n?v.x=b:v.y=w;o.addChild(v)}function k(e){if(!e)e=event;if(!u)return;if(String.fromCharCode(e.keyCode)==i.toUpperCase()){o.visible=!o.visible;u.off("stagemousemove",a);if(o.visible){a=u.on("stagemousemove",N,o)}u.update()}if(String.fromCharCode(e.keyCode)==s.toUpperCase()){o.pixels=!o.pixels}}if(zot(t))t="stage";if(zot(n))n=true;if(t!="stage"&&(!t.getBounds||!t.getBounds())){zog("zim pages - Guide(): Please provide bounds for the obj (setBounds())");return}if(zot(r))r=true;if(zot(i))i="G";if(zot(s))s="P";var o=this;var u;var a;e.dashedLinesOn();var f=80;var l=26;var c=f/6+f/2;var h=l*2;var p;var d;var v;if(n){v=m("#00c5af","white","white");v.shape.regX=f+f/6;v.shape.regY=l/2;v.label.x=-f/2-f/6}else{v=m("#d61fa0","white","white");v.shape.regX=f/2;v.shape.regY=l+l/4;v.label.y=-l*3/4}var g=setInterval(function(){if(t=="stage"){if(o&&o.getStage()){x()}}else{if(t&&t.getStage()){x()}}},100);var y=false;var b;var w;var E;var S;var T={x:0,y:0};Object.defineProperty(this,"pixels",{get:function(){return!r},set:function(e){r=!e;o.resize()}});window.addEventListener("keydown",k);this.resize=function(){if(!o)return false;if(u){C();N()}return true};this.dispose=function(){if(!o)return false;e.noDrag(E);clearInterval(g);o.removeAllChildren();window.removeEventListener("keydown",k);if(o.parent)o.parent.removeChild(o);o=null;return true}}o.prototype=new createjs.Container;o.prototype.constructor=e.Guide;return new o};e.GuideManager=function(){e.Manager.call(this,"GuideManager")};e.GuideManager.prototype=new e.Manager;e.GuideManager.constructor=e.GuideManager;e.Grid=function(t,n,r,i,s){function o(){function p(e,t,n){var r=new createjs.Container;r.shape=new createjs.Shape;r.shape.graphics.s(t).ss(1).f(e).r(0,0,f,l);r.shape.alpha=.9;r.addChild(r.shape);r.label=new createjs.Text("10","16px verdana",n);r.label.textAlign="center";r.label.textBaseline="middle";r.addChild(r.label);r.mouseChildren=false;r.mouseEnabled=false;return r}function w(){clearInterval(y);if(t=="stage"){o=e.getStage();t=o}else{o=t.getStage()}if(!b){C();t.addChild(e)}o.off("stagemousemove",a);a=o.on("stagemousemove",S);o.update()}function S(e){var n;if(e){n=t.globalToLocal(e.rawX,e.rawY);E=n}else{n={x:E.x,y:E.y}}if(!r){c.label.text="x:"+Math.max(0,Math.min(Math.round(n.x),Math.round(x)));c.x=Math.max(d,Math.min(n.x,m));h.label.text="y:"+Math.max(0,Math.min(Math.round(n.y),Math.round(T)));h.y=Math.max(v,Math.min(n.y,g))}else{c.label.text="x:"+Math.max(0,Math.min(Math.round(n.x/x*100),100))+"%";c.x=Math.max(d,Math.min(n.x,m));h.label.text="y:"+Math.max(0,Math.min(Math.round(n.y/T*100),100))+"%";h.y=Math.max(v,Math.min(n.y,g))}if(o)o.update()}function C(){b=true;x=t.getBounds().width;T=t.getBounds().height;o.mouseMoveOutside=true;o.enableMouseOver(10);m=x-f*2/3;g=T-l-l;N=new createjs.Container;e.addChild(N);var i=new createjs.Shape;N.addChild(i);var s=i.graphics;s.s(n).ss(1);var a=new createjs.Shape;N.addChild(a);if(!r){for(var p=0;p<x/u;p++){s.mt(p*u,0).lt(p*u,T)}for(var p=0;p<T/u;p++){s.mt(0,p*u).lt(x,p*u)}i.alpha=.3;s=a.graphics;s.s(n).ss(1);for(var p=0;p<x/(u*10);p++){s.mt(p*u*10,0).lt(p*u*10,T)}for(var p=0;p<T/(u*10);p++){s.mt(0,p*u*10).lt(x,p*u*10)}}else{for(var p=1;p<20+2;p++){s.mt(p*x/20,0).lt(p*x/20,T)}for(var p=1;p<20;p++){s.mt(0,p*T/20).lt(x,p*T/20)}i.alpha=.3;s=a.graphics;s.s(n).ss(1);for(var p=1;p<10;p++){s.mt(p*x/10,0).lt(p*x/10,T)}for(var p=1;p<10;p++){s.mt(0,p*T/10).lt(x,p*T/10)}}var d=80;s.s("#FFFFFF").ss(8);s.mt(x/2,T/2-d/2).lt(x/2,T/2+d/2);s.mt(x/2-d/2,T/2).lt(x/2+d/2,T/2);s.s("#000000").ss(4);s.mt(x/2,T/2-d/2).lt(x/2,T/2+d/2);s.mt(x/2-d/2,T/2).lt(x/2+d/2,T/2);s.s(n).ss(3);s.dr(0,0,x,T);a.alpha=.5;N.cache(0,0,x,T);e.addChild(c);e.addChild(h);o.update()}function k(t){if(!t)t=event;if(!o)return;if(String.fromCharCode(t.keyCode)==i.toUpperCase()){e.visible=!e.visible;o.off("stagemousemove",a);if(e.visible){a=o.on("stagemousemove",S,e)}o.update()}if(String.fromCharCode(t.keyCode)==s.toUpperCase()){e.removeChild(N);N=null;e.pixels=!e.pixels}}if(zot(t))t="stage";if(zot(n))n="black";if(t!="stage"&&(!t.getBounds||!t.getBounds())){zog("zim pages - Grid(): Please provide bounds for the obj (setBounds())");return}if(zot(r))r=true;if(zot(i))i="G";if(zot(s))s="P";var e=this;var o;var u=10;var a;this.mouseChildren=false;this.mouseEnabled=false;var f=80;var l=26;var c=p("#dddddd",n,"#333333");c.shape.regX=f/2;c.shape.regY=-l/4;c.label.y=l*3/4;var h=p("#dddddd",n,"#333333");h.shape.regX=-f/6;h.shape.regY=l/2;h.label.x=f/2+f/6;var d=f/6+f/2;var v=l*2;var m;var g;c.x=d;h.y=v;c.label.text="x:0";h.label.text="y:0";var y=setInterval(function(){if(t=="stage"){if(e&&e.getStage()){w()}}else{if(t&&t.getStage()){w()}}},100);var b=false;var E={x:0,y:0};var x;var T;var N;Object.defineProperty(this,"pixels",{get:function(){return!r},set:function(t){r=!t;e.resize()}});window.addEventListener("keydown",k);this.resize=function(){e.removeChild(N);N=null;if(o){C();S();setTimeout(function(){e.removeChild(N);N=null;C()},200)}};this.dispose=function(){clearInterval(y);e.removeAllChildren();window.removeEventListener("keydown",k);if(e.parent)e.parent.removeChild(e);e=null}}o.prototype=new createjs.Container;o.prototype.constructor=e.Grid;return new o};e.GridManager=function(){e.Manager.call(this,"GridManager")};e.GridManager.prototype=new e.Manager;e.GridManager.constructor=e.GridManager;e.Layout=function(t,n,r,i,s,o,u,a){function f(){function x(){var e=0;for(var t=0;t<n.length;t++){h=n[t];h.given=0;if(h[v]==0)e+=h.object.getBounds()[v]}for(var t=0;t<n.length;t++){h=n[t];if(h[v]==0)h.given=h.object.getBounds()[v]/e*S}}function T(e){if(!e)e=event;if(o){if(String.fromCharCode(e.keyCode)==a.toUpperCase()){o.visible=!o.visible;if(o.getStage())o.getStage().update()}}}if(zot(t)||!t.getBounds){zog("zim pages - Layout(): please provide an object with bounds set that holds the objects being laid out");return}u=zot(u)?t:u;if(!u.getBounds||!u.getBounds()){zog("zim pages - Layout(): holder must have bounds set or provide a scalingObject with bounds");return}var f=u.getBounds();t.setBounds(0,0,f.width,f.height);if(zot(r))r=0;if(zot(s))s=true;if(zot(i))i="";if(zot(a))a="B";e.dashedLinesOn();var l=new createjs.Shape;var c=this;this.active=true;var h;var p=0;var d="minWidth";var v="width";var m="height";var g="marginLeft";var y="maxHeight";var b="x";var w="y";if(s){d="minHeight";v="height";m="width";g="marginTop";y="maxWidth";b="y";w="x"}for(var E=0;E<n.length;E++){h=n[E];if(!h.object||!h.object.getBounds()){zog("zim pages - Layout(): each region object must have an object with setBounds() set");return}if(!h[d])h[d]=0;if(!h[v])h[v]=0;if(!h.backgroundColor)h.backgroundColor="";h.given=0;h.maxGiven=0;if(!h[g])h[g]=0;if(!h[y])h[y]=100;if(s){if(!h.align)h.align="middle";if(!h.valign){if(E==0){h.valign="top"}else if(E==n.length-1){h.valign="bottom"}else{h.valign="middle"}if(n.length==1){h.valign="middle"}}}else{if(!h.valign)h.valign="top";if(!h.align){if(E==0){h.align="left"}else if(E==n.length-1){h.align="right"}else{h.align="middle"}if(n.length==1){h.align="middle"}}}if(h[v])h[d]=0;p+=h[v]+h[g]}p+=r;if(p>100){zog("zim pages - Layout(): cannot fit regions into 100% bounds");return}var S=100-p;x();this.resize=function(){if(!c.active)return;f=u.getBounds();t.setBounds(0,0,f.width,f.height);l.graphics.clear();if(i!="")l.graphics.f(i).r(0,0,f.width,f.height);for(var a=0;a<n.length;a++){h=n[a];h.maxGiven=0;h.marginGiven=0}var b=true;var w;var E;var T;var N;var C;var k;var L;var A=S;while(b){E=0;b=false;w=true;for(var a=0;a<n.length;a++){h=n[a];if(h.given>0&&h.maxGiven==0){T=h.object.getBounds()[v];N=h.object.getBounds()[m];C=h.given*f[v]/100;k=h[y]*f[m]/100;L=N/T*C;if(L>k){b=true;h.maxGiven=T/N*k*100/f[v];E+=h.given-h.maxGiven;A-=h.maxGiven}else{w=false}}}if(!b)break;if(w)break;totalPrimaries=0;for(var a=0;a<n.length;a++){h=n[a];if(h[v]==0&&h.maxGiven==0)totalPrimaries+=h.object.getBounds()[v]}for(var a=0;a<n.length;a++){h=n[a];if(h[v]==0&&h.maxGiven==0)h.given=h.object.getBounds()[v]/totalPrimaries*A}}var O=true;h=n[0];if(h.maxGiven>0){if(h.maxGiven<h[d]){h[v]=h[d];O=false}}else if(h.given>0){if(h.given<h[d]){h[v]=h[d];O=false}}h=n[n.length-1];if(h.maxGiven>0){if(h.maxGiven<h[d]){h[v]=h[d];O=false}}else if(h.given>0){if(h.given<h[d]){h[v]=h[d];O=false}}if(!O){p=0;for(var a=0;a<n.length;a++){h=n[a];p+=h[v]+h[g]}p+=r;if(p>100){zog("zim build - Layout(): cannot fit regions into 100% bounds");return}S=100-p;x();c.resize();return}var M=true;var _=0;var D=0;for(var a=0;a<n.length;a++){h=n[a];_+=h[g];if(h[v]>0)D+=h[v];else if(h.maxGiven>0)D+=h.maxGiven;else if(h.given>0)D+=h.given;if(h[v]==0){M=false}}if(M||w){_+=r;var P=100-D-_;_-=r+n[0][g];if(P!=0&&_!=0){for(var a=0;a<n.length;a++){if(a==0)continue;h=n[a];h.marginGiven=h[g]/_*(_+P)}}}var H=0;var B=0;var T;var N;var j;var F;var I;if(o&&o.graphics){var q=o.graphics;q.c()}for(var a=0;a<n.length;a++){h=n[a];if(h.marginGiven>0)H+=h.marginGiven*f[v]/100;else H+=h[g]*f[v]/100;if(h[v]>0){T=h[v]}else if(h.maxGiven>0){T=h.maxGiven}else if(h.given>0){T=h.given}else{T=0}T=T*f[v]/100;N=h[y]*f[m]/100;B=(f[m]-N)/2;if(s)j=e.fit(h.object,B,H,N,T);else j=e.fit(h.object,H,B,T,N);if(h.valign=="top")h.object.y=j.bY;else if(h.valign=="bottom")h.object.y=j.bY+j.bHeight-j.height;if(h.align=="left")h.object.x=j.bX;else if(h.align=="right")h.object.x=j.bX+j.bWidth-j.width;if(o&&o.graphics){q.s("white").ss(2).r(j.bX,j.bY,j.bWidth,j.bHeight);q.s("#ff8203").ss(2).drawDashedRect(j.bX,j.bY,j.bWidth,j.bHeight,20)}I=F=0;if(H==0||H+T==f[v])if(s){I=1}else{F=1}if(N==f[m])if(s){F=1}else{I=1}if(h.backgroundColor!="")l.graphics.f(h.backgroundColor).r(j.bX,j.bY,j.bWidth+F,j.bHeight+I);H+=T}};this.resize();if(o)t.addChild(o);t.addChildAt(l,0);window.addEventListener("keydown",T);this.disable=function(){c.active=false;window.removeEventListener("keydown",T);if(o)o.alpha=0};this.enable=function(){c.active=true;window.addEventListener("keydown",T);c.resize();if(o)o.alpha=1};this.removeShape=function(){if(o){o.graphics.clear();t.removeChild(o);o=null;o=false}window.removeEventListener("keydown",T)};this.addShape=function(e,n){c.removeShape();o=e;window.addEventListener("keydown",T);t.addChild(o);c.resize()};this.dispose=function(){c.removeShape()}}f.prototype=new createjs.EventDispatcher;f.prototype.constructor=e.Layout;return new f};e.LayoutManager=function(){if(zon)zog("zim pages - LayoutManager");var e=this;this.items=[];this.add=function(t){e.items.push(t)};this.resize=function(){for(var t=0;t<e.items.length;t++){e.items[t].resize()}};this.disable=function(){for(var t=0;t<e.items.length;t++){e.items[t].disable()}};this.enable=function(){for(var t=0;t<e.items.length;t++){e.items[t].enable()}};this.dispose=function(){for(var t=0;t<e.items.length;t++){e.items[t].removeShape()}}};return e}(zim||{})