
// ZIM js Interactive Media modules by Dan Zen http://danzen.com (c) 2014
// zim.js includes all the basic zim coding modules http://zimjs.com
// free to use - donations welcome of course! http://zimjs.com/donate

function zid(e){return document.getElementById(e)}function zss(e){return document.getElementById(e)?document.getElementById(e).style:void(zon&&zog("zim wrap - zss(): id not found"))}function zgo(e,t,o){zot(t)&&""!=t&&"_self"!=t?window.location.href=e:zot(o)?window.open(e,"_blank"):window.open(e,"_blank","modal=yes,alwaysRaised=yes")}function zum(e){return zot(e)?void 0:Number(String(e).replace(/[^\d\.\-]/g,""))}function zot(e){return null===e?!0:"undefined"==typeof e}function zop(e){zot(e)||(e.stopImmediatePropagation&&e.stopImmediatePropagation(),window.event&&(window.event.cancelBubble=!0))}function zil(){var e=function(e){e||(e=event),e.keyCode&&e.keyCode>=32&&e.keyCode<=40&&e.preventDefault()},t=function(e){e||(e=event),e.preventDefault()},o=t;return window.addEventListener("keydown",e),window.addEventListener("mousewheel",t),window.addEventListener("DOMMouseScroll",o),[e,t,o]}"undefined"==typeof zon&&(zon=!1);var zog=console.log.bind(console);zon&&zog("ZIM WRAP - zog zid zss zgo zum zot zop zil");var zim=function(e){return zon&&zog("ZIM CODE Module"),e.shuffle=function(e){if(!zot(e)){var t,o,i=e.length;if(0==i)return e;for(;--i;)t=Math.floor(Math.random()*(i+1)),o=e[i],e[i]=e[t],e[t]=o;return e}},e.rand=function(e,t,o){zot(o)&&(o=!0),zot(t)&&(t=0),zot(e)&&(e=0),o&&(e>t?e++:t>e&&t++);var i;return 0==e&&0==t?Math.random():(i=0==t?Math.random()*e:Math.min(e,t)+Math.random()*(Math.max(e,t)-Math.min(e,t)),o?Math.floor(i):i)},e.copy=function(t){if(null!=t&&"object"==typeof t){if(t instanceof Array)return t.slice(0);if(t instanceof Object){copy={};for(var o in t)t.hasOwnProperty(o)&&(copy[o]=e.copy(t[o]));return copy}}},e.arraysEqual=function(t,o,i){if(zot(t)||zot(o))return!1;if(zot(i)&&(i=!0),t.length!=o.length)return!1;for(var n=0;n<t.length;n++)if(t[n]instanceof Array&&o[n]instanceof Array){if(!e.arraysEqual(t[n],o[n],i))return!1}else{if(i&&t[n]!=o[n])return!1;if(!i)return e.arraysEqual(t.sort(),o.sort(),!0)}return!0},e.decimals=function(e,t){return zot(e)||0==e?0:(zot(t)&&(t=1),Math.round(e*Math.pow(10,t))/Math.pow(10,t))},e.Damp=function(e,t){zon&&zog("zim code - Damp"),this.lastValue=zot(e)?0:e,this.damp=zot(t)?.1:t},e.Damp.prototype.convert=function(e){return this.lastValue=this.lastValue+(e-this.lastValue)*this.damp},e.Proportion=function(e,t,o,i,n,a){zon&&zog("zim code - Proportion"),zot(o)&&(o=0),zot(i)&&(i=1),zot(n)&&(n=1),zot(a)&&(a=!1);var r,s,d;r=e,this.convert=function(r){return isNaN(r)?void 0:(r=Math.max(r,e),r=Math.min(r,t),s=(r-e)/(t-e),d=n>0?o+(i-o)*s:i-(i-o)*s,a&&(d=Math.round(d)),d)}},e.ProportionDamp=function(e,t,o,i,n,a,r){function s(){isNaN(d)||(d=Math.max(d,e),d=Math.min(d,t),h=(d-e)/(t-e),l=i-o,u=a>0?o+l*h:i-l*h,p=u,c=p-f,f+=c*g.damp,r&&(f=Math.round(f)))}zon&&zog("zim code - ProportionDamp"),zot(o)&&(o=0),zot(i)&&(i=1),zot(n)&&(n=.1),zot(a)&&(a=1),zot(r)&&(r=!1),this.damp=n;var d,h,l,u,c,g=this,p=0,f=0;d=e,f=o;var m=setInterval(s,20);this.immediate=function(e){this.convert(e),s(),f=u,r&&(f=Math.round(f))},this.convert=function(e){return d=e,f},this.dispose=function(){clearInterval(m)}},e.scrollY=function(){var e=0,t=navigator.appName,o=navigator.userAgent.indexOf("Safari");if(-1!=o||"Safari"==t)var e=1;return e||"CSS1Compat"!=document.compatMode?document.body.scrollTop:document.documentElement.scrollTop},e.windowWidth=function(){return isNaN(window.innerWidth)?window.clientWidth:window.innerWidth},e.windowHeight=function(){return isNaN(window.innerHeight)?window.clientHeight:window.innerHeight},e.urlEncode=function(e){var e=(e+"").toString();return encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")},e.urlDecode=function(e){return decodeURIComponent((e+"").replace(/\+/g,"%20"))},e.setCookie=function(e,t,o){if(o){var i=new Date;i.setTime(i.getTime()+24*o*60*60*1e3);var n="; expires="+i.toGMTString()}else var n="";document.cookie=e+"="+escape(t)+n+"; path=/"},e.getCookie=function(e){var t,o=document.cookie.split(/;\s*/),n=new Array;for(i=0;i<o.length;i++)t=o[i].split("="),n[t[0]]=t[1];return unescape(n[e])},e.deleteCookie=function(t){e.setCookie(t,"",-1)},e}(zim||{}),zim=function(e){return zon&&zog("ZIM CREATE Module"),e.drag=function(t,o,i,n,a,r,s){function d(){u=0,c=0,p=s?e.boundsToGlobal(t.parent,o):o,g=t.parent.localToGlobal(t.x,t.y),h(t,g.x,g.y)}function h(e,t,o){if(e.parent&&e.getStage()){var i=e.parent.globalToLocal(t,o),n=l(i.x-u,i.y-c);e.x=n.x,e.y=n.y,e.getStage().update()}}function l(e,i){if(o){var n=t.parent.localToGlobal(e,i);e=Math.max(p.x,Math.min(p.x+p.width,n.x)),i=Math.max(p.y,Math.min(p.y+p.height,n.y)),n=t.parent.globalToLocal(e,i),e=n.x,i=n.y}return{x:e,y:i}}if(!zot(t)&&t.on){t.cursor=zot(i)?"pointer":i,zot(o)&&(s=!1),zot(a)&&(a=!1),zot(r)&&(r=!1),zot(s)&&(s=!1);var u,c,g,p;return t.zimAdded=t.on("added",d,null,!0),t.parent&&d(),t.zimDown=t.on("mousedown",function(i){var d=a?i.currentTarget:i.target,h=d.parent.globalToLocal(i.stageX,i.stageY);u=h.x-i.target.x,c=h.y-i.target.y,p=s?e.boundsToGlobal(t.parent,o):o,t.cursor=zot(n)?"move":n,r||i.stopImmediatePropagation()},!0),t.zimMove=t.on("pressmove",function(e){var t=a?e.currentTarget:e.target;h(t,e.stageX,e.stageY)},!0),t.zimUp=t.on("pressup",function(){t.cursor=zot(i)?"pointer":i},!0),t}},e.noDrag=function(e){return!zot(e)&&e.on?(e.cursor="default",e.off("added",e.zimAdded),e.off("mousedown",e.zimDown),e.off("pressmove",e.zimMove),e.off("pressup",e.zimUp),e):void 0},e.hitTestPoint=function(e,t,o){if(!zot(e)&&e.globalToLocal){var i=e.globalToLocal(t,o);return e.hitTest(i.x,i.y)}},e.hitTestReg=function(e,t){if(!zot(e)&&!zot(t)&&e.localToLocal&&t.localToLocal){var o=t.localToLocal(t.regX,t.regY,e);return e.hitTest(o.x,o.y)}},e.hitTestRect=function(e,t,o){if(!zot(e)&&!zot(t)&&e.hitTest&&t.getBounds){zot(o)&&(o=0);var i=t.getBounds();if(!i)return void zog("zim create - hitTestRect():\n please setBounds() on param b object");for(var n,a,r,s=0;o>=s;s++){if(n=i.width*(s+1)/(o+1),a=i.height*(s+1)/(o+1),r=t.localToLocal(i.x+n,i.y,e),e.hitTest(r.x,r.y))return!0;if(r=t.localToLocal(i.x+i.width,i.y+a,e),e.hitTest(r.x,r.y))return!0;if(r=t.localToLocal(i.x+i.width-n,i.y+i.height,e),e.hitTest(r.x,r.y))return!0;if(r=t.localToLocal(i.x,i.y+i.height-a,e),e.hitTest(r.x,r.y))return!0}}},e.hitTestCircle=function(e,t,o){if(!zot(e)&&!zot(t)&&e.hitTest&&t.getBounds){zot(o)&&(o=8);var i=t.getBounds();if(!i)return void zog("zim create - hitTestCircle():\n please setBounds() on param b object");for(var n,a,r,s,d=i.x+i.width/2,h=i.y+i.height/2,l=(i.width+i.height)/2/2,u=0;o>u;u++)if(n=u/o*2*Math.PI,a=d+l*Math.cos(n),r=h+l*Math.sin(n),s=t.localToLocal(a,r,e),e.hitTest(s.x,s.y))return!0}},e.hitTestBounds=function(t,o,i){function n(e,t){return e.x>=t.x+t.width||e.x+e.width<=t.x||e.y>=t.y+t.height||e.y+e.height<=t.y?!1:!0}if(!zot(t)&&!zot(o)&&t.getBounds&&o.getBounds){var a=!1;i&&i.graphics&&(a=!0);var r=t.getBounds(),s=o.getBounds();if(!r||!s)return void zog("zim create - hitTestBounds():\n please setBounds() on both objects");var d=e.boundsToGlobal(t),h=e.boundsToGlobal(o);if(a){var l=i.graphics;l.clear(),l.setStrokeStyle(1).beginStroke("blue"),l.drawRect(d.x,d.y,d.width,d.height),l.beginStroke("green"),l.drawRect(h.x,h.y,h.width,h.height),i.getStage().update()}return n(d,h)}},e.boundsToGlobal=function(e,t){if(!zot(e)&&e.getBounds){var o=e.getBounds();if(!o&&zot(t))return void zog("zim create - boundsToGlobal():\n please setBounds() on object (or a rectangle)");t&&(o=t);var i=e.localToGlobal(o.x,o.y),n=e.localToGlobal(o.x+o.width,o.y),a=e.localToGlobal(o.x+o.width,o.y+o.height),r=e.localToGlobal(o.x,o.y+o.height),s=Math.min(i.x,n.x,a.x,r.x),d=Math.min(i.y,n.y,a.y,r.y),h=Math.max(i.x,n.x,a.x,r.x),l=Math.max(i.y,n.y,a.y,r.y);return new createjs.Rectangle(s,d,h-s,l-d)}},e.scale=function(e,t){return!zot(e)&&e.scaleX?(zot(t)&&(t=1),e.scaleX=e.scaleY=t,e):void 0},e.scaleTo=function(t,o,i,n,a){if(zot(t)||!t.getBounds||!t.getBounds())return void zog("zim create - scaleTo(): please provide an object (with setBounds) to scale");if(zot(o)||!o.getBounds||!o.getBounds())return void zog("zim create - scaleTo(): please provide a boundObject (with setBounds) to scale to");if(zot(i)&&(i=-1),zot(n)&&(n=-1),-1==i&&-1==n)return t;zot(a)&&(a="smallest");var r=o.getBounds().width*i/100,s=o.getBounds().height*n/100;if((-1==i||-1==n)&&"both"!=a&&"stretch"!=a)return-1==i?e.scale(t,s/t.getBounds().height):e.scale(t,r/t.getBounds().width),t;if("both"==a||"stretch"==a)return t.scaleX=-1!=i?r/t.getBounds().width:t.scaleX,t.scaleY=-1!=n?s/t.getBounds().height:t.scaleY,t;if("biggest"==a||"largest"==a||"outside"==a)var d=Math.max(r/t.getBounds().width,s/t.getBounds().height);else var d=Math.min(r/t.getBounds().width,s/t.getBounds().height);return e.scale(t,d),t},e.move=function(t,o,i,n,a,r,s,d,h){return e.animate(t,{x:o,y:i},n,a,r,s,d,h)},e.animate=function(e,t,o,i,n,a,r,s){function d(){n&&"function"==typeof n&&n(a),createjs.Ticker.off("tick",h)}if(!zot(e)&&e.on&&!zot(t)){zot(i)&&(i="quadInOut"),zot(r)&&(r=0),zot(s)&&(s={override:!0}),createjs.Tween.get(e,s).wait(r).to(t,o,createjs.Ease[i]).call(d);var h=createjs.Ticker.on("tick",stage);return e}},e.fit=function(e,t,o,i,n,a){if(!zot(e)&&e.getBounds){if(!e.getBounds())return void zog("zim create - fit(): please setBounds() on object");if(zot(t)){if(!e.getStage())return void zog("zim create - fit(): please add boundary dimensions or add obj to stage first");if(!e.getStage().getBounds())return void zog("zim create - fit(): please add boundary dimensions or add obj with bounds to stage first");var r=e.getStage().getBounds().width,s=e.getStage().getBounds().height;t=0,o=0,i=r,n=s}zot(a)&&(a=!0),e.scaleX=e.scaleY=1;var d,h=i,l=n,u=e.getBounds().width,c=e.getBounds().height;d=a?h/l>=u/c?l/c:h/u:h/l>=u/c?h/u:l/c,e.scaleX=e.scaleY=d;var g=u*d,p=c*d;return e.x=t+(h-g)/2,e.y=o+(l-p)/2,{x:e.x,y:e.y,width:g,height:p,scale:d,bX:t,bY:o,bWidth:i,bHeight:n}}},e.outline=function(e,t,o){if(zot(e)||!e.getBounds)return void zog("zim create - outline(): please provide object and shape");if(!e.getBounds())return void zog("zim create - outline(): please setBounds() on object");if(!e.parent)return void zog("zim create - outline(): object should be on stage first");zot(t)&&(t="brown"),zot(o)&&(o=2);var i=e.getBounds(),n=new createjs.Shape,a=e.parent,r=e.localToLocal(i.x,i.y,a),s=e.localToLocal(i.x+i.width,i.y,a),d=e.localToLocal(i.x+i.width,i.y+i.height,a),h=(e.localToLocal(i.x,i.y+i.height,a),n.graphics);h.s(t).ss(o).r(r.x,r.y,s.x-r.x,d.y-s.y),zero={x:r.x-i.x*e.scaleX,y:r.y-i.y*e.scaleY};var l=10,u=l+1;return h.s("white").ss(o+2),h.mt(zero.x-u,zero.y+0).lt(zero.x+u,zero.y+0),h.mt(zero.x+0,zero.y-u).lt(zero.x+0,zero.y+u),h.s(t).ss(o),h.mt(zero.x-l,zero.y+0).lt(zero.x+l,zero.y+0),h.mt(zero.x+0,zero.y-l).lt(zero.x+0,zero.y+l),h.s("white").ss(o+2).dc(e.x,e.y,l+6),h.s(t).ss(o).dc(e.x,e.y,l+6),e.parent.addChild(n),e.getStage()&&e.getStage().update(),e},e}(zim||{}),zim=function(e){return zon&&zog("ZIM BUILD Module"),e.Triangle=function(t,o,i,n,a,r,s,d){function h(){zot(t)&&(t=100),zot(o)&&(o=t),zot(i)&&(i=t),zot(n)&&(n="black"),zot(s)&&(s=!0),zot(d)&&(d=0);var h=[t,o,i];if(h.sort(function(e,t){return t-e}),aa=h[0],bb=h[1],cc=h[2],aa>bb+cc)return void zog("zim build - Triangle(): invalid triangle lengths");var l=new createjs.Shape;this.addChild(l);var u=l.graphics;u.f(n),zot(a)||(u.s(a),zot(r)&&(r=1),u.ss(r)),u.mt(0,0),u.lt(t,0);var c,g=180*Math.acos((Math.pow(bb,2)+Math.pow(cc,2)-Math.pow(aa,2))/(2*bb*cc))/Math.PI,p=180*Math.asin(bb*Math.sin(g*Math.PI/180)/aa)/Math.PI,f=180-g-p;c=i==aa?g:i==bb?p:f;var m=Math.cos(c*Math.PI/180)*o,v=Math.sin(c*Math.PI/180)*o;this.width=Math.max(t,t-m),this.height=v,this.setBounds(0,0,this.width,this.height),l.y=this.height,u.lt(t-m,0-v),u.lt(0,0),s&&(this.regX=this.width/2,this.regY=this.height/2+d),this.clone=function(){return new e.Triangle(t,o,i,n,a,r,s,d)}}return h.prototype=new createjs.Container,h.constructor=e.Triangle,new h},e.Label=function(t,o,i,n,a,r,s){function d(){zot(t)&&(t="LABEL"),""==t&&(t=" "),zot(o)&&(o=36),zot(i)&&(i="arial"),zot(n)&&(n="black"),zot(a)&&(a=n),zot(r)&&(r=null),zot(s)&&(s=16);var d=this;this.mouseChildren=!1;var h=this.label=new createjs.Text(String(t),o+"px "+i,n);h.textBaseline="alphabetic",h.textAlign="left",r&&s>0&&(h.shadow=new createjs.Shadow(r,3,3,s)),this.addChild(h);var l=new createjs.Shape;l.graphics.f("rgba(0,255,255,.01)").r(0,0,this.getBounds().width,this.getBounds().height),this.addChildAt(l,0),this.setBounds(0,0,this.getBounds().width,this.getBounds().height),h.y=o-o/6,Object.defineProperty(d,"text",{get:function(){var e=" "==h.text?"":h.text;return e},set:function(e){h.text=e}}),this.showRollColor=function(e){zot(e)&&(e=!0),h.color=e?a:n,d.getStage()&&d.getStage().update()},this.on("mouseover",function(){d.showRollColor()}),this.on("mouseout",function(){d.showRollColor(!1)}),this.clone=function(){return new e.Label(d.text,o,i,n,a,r,s)},this.dispose=function(){d.removeAllEventListeners()}}return d.prototype=new createjs.Container,d.constructor=e.Label,new d},e.Button=function(t,o,i,n,a,r,s,d,h,l){function u(){function u(){f.on("mouseout",c);var e=g.graphics;e.clear(),e.f(a),r&&e.s(r).ss(s),e.rr(0,0,t,o,d),f.label.showRollColor(),f.getStage()&&f.getStage().update()}function c(){f.off("mouseout",c);var e=g.graphics;e.clear(),e.f(n),r&&e.s(r).ss(s),e.rr(0,0,t,o,d),f.label.showRollColor(!1),f.getStage()&&f.getStage().update()}zot(t)&&(t=200),zot(o)&&(o=60),zot(n)&&(n="#C60"),zot(a)&&(a="#F93"),zot(r)&&(r=null),zot(s)&&(s=1),zot(d)&&(d=20),zot(h)&&(h="#666"),zot(l)&&(l=16),zot(i)&&(i="PRESS"),("string"==typeof i||"number"==typeof i)&&(i=new e.Label(i,36,"arial","white")),this.mouseChildren=!1,this.cursor="pointer";var g=new createjs.Shape,p=g.graphics;p.f(n),r&&p.s(r).ss(s),p.rr(0,0,t,o,d),this.addChild(g),this.backing=g,l>0&&(g.shadow=new createjs.Shadow(h,3,3,l)),this.setBounds(0,0,t,o),this.width=t,this.height=o,i.x=(t-i.getBounds().width)/2+1,i.y=(o-i.getBounds().height)/2+2,this.addChild(i),this.label=i,this.on("mouseover",u);var f=this;this.dispose=function(){f.removeAllEventListeners(),f.removeChild(g),f.removeChild(buttonLabel),g=null,buttonLabel=null}}return u.prototype=new createjs.Container,u.constructor=e.Button,new u},e.CheckBox=function(t,o,i,n,a){function r(){function r(){s=!s,d.setChecked(s),d.dispatchEvent("change")}zot(t)&&(t=60),zot(o)&&(o=null),("string"==typeof o||"number"==typeof o)&&(o=new e.Label(o,5*t/6,"arial",n));var s=zot(i)?!1:i;zot(n)&&(n="black"),zot(a)&&(a=10),this.setBounds(-a,-a,t+2*a,t+2*a);var d=this;this.cursor="pointer";var h=new createjs.Shape,l=h.graphics;l.f("rgba(0,0,0,.01)").r(this.getBounds().x,this.getBounds().y,this.getBounds().width,this.getBounds().height),l.f("rgba(255,255,255,.5)").r(0,0,t,t),l.s(n).ss(t/10).r(t/7,t/7,t-t/7*2,t-t/7*2),this.addChild(h),o&&(this.addChild(o),o.x=this.getBounds().width,o.y=t/8,this.label=o);var u=new createjs.Shape,c=u.graphics;c.f(n).p("AnQAdICBiaIEEDZIF8nfICfB4In/KPg");var g=95;u.setBounds(-g/2,-g/2,g,g);var p=t/(g+66);u.scaleX=u.scaleY=p,u.x=t/2,u.y=t/2,s&&this.addChild(u),this.on("click",r),Object.defineProperty(d,"checked",{get:function(){return s},set:function(e){d.setChecked(e)}}),this.setChecked=function(e){zot(e)&&(e=!0),s=e,s?d.addChild(u):d.removeChild(u),d.getStage()&&d.getStage().update()},this.dispose=function(){d.removeAllEventListeners()}}return r.prototype=new createjs.Container,r.constructor=e.CheckBox,new r},e.RadioButtons=function(t,o,i,n,a,r){function s(){function s(e){l.setSelected(c.getChildIndex(e.target)),l.dispatchEvent("change")}function d(){for(var r,s=!1,d=o.length-1;d>=0;d--)r=o[d],r.selected&&r.selected===!0&&(s?r.selected="false":s=!0);c.removeAllChildren();for(var g,p=0,d=0;d<o.length;d++){if(r=o[d],"string"==typeof r||"number"==typeof r){var f={selected:!1,label:new e.Label(r,5*t/6,"arial",n)};r=f}(r.label&&"string"==typeof r.label||"number"==typeof r.label)&&(r.label=new e.Label(r.label,5*t/6,"arial",n)),l.labels.push(r.label),r.index=d,g=h(r.selected,r.label),g.obj=r,r.selected&&(u=g.obj),c.addChild(g),i?(g.y=p,p+=g.getBounds().height+a):(g.x=p,p+=g.getBounds().width+a)}}function h(e,o){var i=new createjs.Container;i.mouseChildren=!1,i.setBounds(-r,-r,t+2*r,t+2*r);var a=new createjs.Shape,s=a.graphics;s.f("rgba(0,0,0,.01)").r(i.getBounds().x,i.getBounds().y,i.getBounds().width,i.getBounds().height),s.f("rgba(255,255,255,.5)").dc(t/2,t/2,t/1.85),s.s(n).ss(t/9).dc(t/2,t/2,t/2-t/2/5),i.addChild(a);var d=i.check=new createjs.Shape;d.mouseEnabled=!1,d.alpha=.95;var h=d.graphics;return h.f(n).dc(t/2,t/2,t/5.2),o&&(i.addChild(o),o.x=i.getBounds().width,o.y=t/8,l.label=o,i.setBounds(-r,-r,t+2*r+o.getBounds().width,Math.max(t+2*r,o.getBounds().height))),e&&i.addChild(d),i}if(zot(t)&&(t=60),t=Math.max(5,t),!zot(o)){zot(i)&&(i=!0),zot(n)&&(n="black"),zot(a)&&(a=i?.2*t:t),zot(r)&&(r=t/5);var l=this;this.cursor="pointer",this.labels=[];var u,c=this.buttons=new createjs.Container;this.addChild(c),c.on("click",s),d();this.getBounds()||this.setBounds(0,0,t,t),this.setBounds(0,0,this.getBounds().width+r,this.getBounds().height+r),this.setSelected=function(e){if(zot(e)&&(e=-1),-1==e||c.getChildAt(e)){for(var t,o=0;o<c.getNumChildren();o++)t=c.getChildAt(o),t.removeChild(t.check);if(e>=0){t=c.getChildAt(e);var i=-2;u&&(i=u.index),u=t.obj}-1==e||i==u.index?(u=null,l.id=null,l.label=null,l.text=""):(t.addChild(t.check),l.id=u.id,l.label=u.label,l.label&&(l.text=l.label.text)),l.getStage()&&l.getStage().update()}},Object.defineProperty(l,"selected",{get:function(){return u},set:function(e){selectedIndex=e}}),Object.defineProperty(l,"selectedIndex",{get:function(){return u?u.index:-1},set:function(e){this.setSelected(e)}}),this.dispose=function(){l.removeAllEventListeners()}}}return s.prototype=new createjs.Container,s.constructor=e.RadioButtons,new s},e.Pane=function(t,o,i,n,a,r,s,d,h,l,u,c){function g(){function g(e,n){return e=Math.max(o/2,Math.min(t.getBounds().width-o/2,e)),n=Math.max(i/2,Math.min(t.getBounds().height-i/2,n)),{x:e,y:n}}if(zot(t)||!t.getBounds)return void zog("zim build - Pane(): Please pass in a reference to a container with bounds set as first parameter");if(!t.getBounds())return void zog("zim build - Pane(): Please give the container bounds using setBounds()");if(zot(t.getStage))return void zog("zim build - Pane(): Please give the container that has a stage property");zot(o)&&(o=200),zot(i)&&(i=200),zot(n)&&(n=null),("string"==typeof n||"number"==typeof n)&&(n=new e.Label(n,40,"arial","black")),zot(a)&&(a="white"),zot(r)&&(r=!1),zot(s)&&(s=!1),zot(d)&&(d=!0),zot(h)&&(h=20),zot(l)&&(l=.14),zot(u)&&(u="#333"),zot(c)&&(c=20);var p=this.backing=new createjs.Shape,f=p.graphics;f.beginFill("black"),f.drawRect(-5e3,-5e3,1e4,1e4),this.setBounds(-o/2,-i/2,o,i),p.alpha=l;var m=this;p.on("click",function(e){m.hide(),m.dispatchEvent("close"),e.stopImmediatePropagation()}),p.on("mousedown",function(e){e.stopImmediatePropagation()}),d&&this.addChild(p);var v=this.display=new createjs.Shape;if(v.setBounds(0,0,o,i),v.regX=o/2,v.regY=i/2,f=v.graphics,f.beginFill(a),f.drawRoundRect(0,0,o,i,h),c>0&&(v.shadow=new createjs.Shadow(u,8,8,c)),v.on("click",function(e){e.stopImmediatePropagation()}),this.resetX,this.resetY,r){v.cursor="pointer";var z,b;v.on("mousedown",function(e){isNaN(m.resetX)&&(m.resetX=m.x),isNaN(m.resetY)&&(m.resetY=m.y),z=e.stageX-m.x,b=e.stageY-m.y,v.cursor="move"}),v.on("pressmove",function(e){var o=g(e.stageX-z,e.stageY-b);m.x=o.x,m.y=o.y,t.getStage().update()}),this.on("pressup",function(){v.cursor="pointer"})}this.addChild(v),n&&(n.x=-n.getBounds().width/2,n.y=-n.getBounds().height/2,this.addChild(n),this.label=n,this.text=n.text),this.hide=function(){t.removeChild(m),t.getStage().update(),s&&(isNaN(m.resetX)||(m.x=m.resetX),isNaN(m.resetY)||(m.y=m.resetY))},this.show=function(){m.x=t.getBounds().width/2,m.y=t.getBounds().height/2,t.addChild(m),t.getStage().update()},this.dispose=function(){v.removeAllEventListeners(),m.removeChild(v),v=null}}return g.prototype=new createjs.Container,g.constructor=e.Pane,new g},e.Waiter=function(t,o,i,n,a,r,s){function d(){if(zot(t)||!t.getBounds)return void zog("zim build - Waiter(): Please pass in a reference to a container with bounds set as first parameter");if(!t.getBounds())return void zog("zim build - Waiter(): Please give the container bounds using setBounds()");if(zot(t.getStage))return void zog("zim build - Waiter(): Please give the container that has a stage property");zot(o)&&(o=600),zot(i)&&(i="orange"),zot(n)&&(n="white"),zot(a)&&(a=16),zot(r)&&(r="#444"),zot(s)&&(s=14);var e=40,d=3,h=.6*e/2,l=(e-2*h)/2,u=d*(2*h+l)+l;this.setBounds(-u/2,-e/2,u,e);var c=this,p=this.display=new createjs.Shape;this.addChild(p),p.setBounds(0,0,u,e),p.regX=u/2,p.regY=e/2,g=p.graphics,g.beginFill(i),g.drawRoundRect(0,0,u,e,a),s>0&&(p.shadow=new createjs.Shadow(r,3,3,s)),p.on("click",function(e){e.stopImmediatePropagation()});var f=new createjs.Container;this.addChild(f);for(var m,v=0;d>v;v++)m=new createjs.Shape,m.graphics.f(n).dc(0,0,h),m.x=(v-(d-1)/2)*(2*h+l),f.addChild(m),m.cache(-h,-h,2*h,2*h),m.alpha=0;t.getStage().update(),this.hide=function(){createjs.Tween.get(c,{override:!0}).to({alpha:0},300).call(function(){createjs.Ticker.off("tick",c.ticker),t.removeChild(c),t.getStage().update()})},this.show=function(){for(var e,i=0,n=0;n<f.getNumChildren();n++)c.alpha=0,createjs.Tween.get(c,{override:!0}).to({alpha:1},300),setTimeout(function(){e=f.getChildAt(i),createjs.Tween.get(e,{loop:!0}).to({alpha:1},o/d/2).wait(o/d).to({alpha:0},o/d).wait(o-o/d-o/d/2),i++},n*o/d);c.ticker=createjs.Ticker.on("tick",function(){t.getStage().update()}),c.x=t.getBounds().width/2,c.y=t.getBounds().height/2,t.addChild(c),t.getStage().update()},this.dispose=function(){p.removeAllEventListeners(),c.removeChild(p),c.removeChild(f),p=null,f=null}}return d.prototype=new createjs.Container,d.constructor=e.Waiter,new d},e.Parallax=function(t,o,i){function n(){for(var e,o,i,n,a=0;a<d.length;a++)e=d[a],n=e.parent.localToGlobal(e.zimsX,e.zimsY),o=n.x,i=n.y,0!=e.zimX&&(o=o-e.zimX/2+e.zimpX.convert(t.mouseX)),0!=e.zimY&&(i=i-e.zimY/2+e.zimpY.convert(t.mouseY)),n=e.parent.globalToLocal(o,i),e.x=n.x,e.y=n.y;t.update()}if(zon&&zog("zim build - Parallax"),zot(t)||!t.getBounds)return void zog("zim build - Parallax(): please pass in the stage with bounds as first parameter");if(!t.getBounds())return void zog("zim build - Pane(): Please give the stage bounds using setBounds()");var a=t.getBounds().width,r=t.getBounds().height,s=this;this.damp=zot(o)?.1:o,this.addLayer=function(t,o,i){zot(t)||(t.zimX=zot(o)?0:o,t.zimY=zot(i)?0:i,0!=t.zimX&&(t.zimpX=new e.ProportionDamp(0,a,0,t.zimX,s.damp)),0!=t.zimY&&(t.zimpY=new e.ProportionDamp(0,r,0,t.zimY,s.damp)),t.zimsX=t.x,t.zimsY=t.y,d.push(t))},this.dispose=function(){d=null,createjs.Ticker.off("tick",l)},i=zot(i)?[]:i;for(var d=[],h=0;h<i.length;h++)this.addLayer(i[h][0],i[h][1],i[h][2]);var l=createjs.Ticker.on("tick",n);createjs.Ticker.setFPS(60)},e.Scroller=function(e,t,o,i,n,a){function r(){if(e.getStage()){if(!e.getStage().getBounds())return void zog("zim build - Scroller(): please setBounds() on stage");d||(d=e.getStage().getBounds().width,h=e.getStage().getBounds().height),0!=s.speed&&0!=s.direction&&(n?(e.x-=s.speed*s.direction,t.x-=s.speed*s.direction,s.direction*s.speed>0?t.x<0&&e.x<t.x?e.x=t.getBounds().width-s.gapFix:e.x<0&&t.x<e.x&&(t.x=e.getBounds().width-s.gapFix):t.x>d&&t.x>e.x?t.x=e.x-e.getBounds().width+s.gapFix:e.x>d&&e.x>t.x&&(e.x=t.x-t.getBounds().width+s.gapFix)):(e.y-=s.speed*s.direction,t.y-=s.speed*s.direction,s.direction*s.speed>0?t.y<0&&e.y<t.y?e.y=t.getBounds().height-s.gapFix:e.y<0&&t.y<e.y&&(t.y=e.getBounds().height-s.gapFix):t.y>h&&t.y>e.y?t.y=e.y-e.getBounds().height+s.gapFix:e.y>h&&e.y>t.y&&(e.y=t.y-t.getBounds().height+s.gapFix)),e.getStage().update())}}if(zon&&zog("zim build - Scroller"),!zot(e)&&e.getBounds&&!zot(t)&&t.getBounds){zot(n)&&(n=!0);var s=this;if(this.speed=zot(o)?1:o,this.direction=zot(i)?1:i,this.gapFix=zot(a)?0:a,!e.getBounds()||!t.getBounds())return void zog("zim build - Scroller(): please setBounds() on backing objects");if(!e.getStage())return void zog("zim build - Scroller(): please add backing objects to stage to start");var d,h;n?t.x=e.getBounds().width:t.y=e.getBounds().height;var l=createjs.Ticker.on("tick",r);createjs.Ticker.setFPS(60),this.dispose=function(){zon&&zog("bye from Scroller"),createjs.Ticker.off("tick",l)}}},e}(zim||{}),zim=function(e){return zon&&zog("ZIM PAGES Module"),e.Swipe=function(t,o,i){function n(){if(zot(t)||!t.on)return void zog("zim pages - Swipe():\nPlease pass in object");zot(o)&&(o=30),zot(i)&&(i=80),this.distance=o,this.duration=i,this.active=!0;var e,n,a,r,s,d,h=this;t.on("mousedown",function(o){function i(){var t=!1;Math.abs(a-e)>Math.abs(r-n)?(a-e>h.distance&&(h.direction="right",h.dispatchEvent("swipe"),t=!0),e-a>h.distance&&(h.direction="left",h.dispatchEvent("swipe"),t=!0)):(r-n>h.distance&&(h.direction="down",h.dispatchEvent("swipe"),t=!0),n-r>h.distance&&(h.direction="up",h.dispatchEvent("swipe"),t=!0)),t||(h.direction="none",h.dispatchEvent("swipe"))}h.active&&(h.obj=o.target,a=e=o.stageX,r=n=o.stageY,s=!0,h.dispatchEvent("swipedown"),clearTimeout(d),d=setTimeout(function(){s&&(i(),s=!1)},h.duration),t.on("pressmove",function(e){a=e.stageX,r=e.stageY}),t.on("pressup",function(){s&&(i(),s=!1,clearTimeout(d))}))}),this.disable=function(){h.active=!1},this.enable=function(){h.active=!0}}return n.prototype=new createjs.EventDispatcher,n.prototype.constructor=e.Swipe,new n},e.Pages=function(t,o,i,n,a){function r(){function r(){s=new createjs.Shape,s.graphics.f("black").r(0,0,l,u+1),d=new createjs.Shape,d.graphics.f("white").r(0,0,l,u+1)}if(zot(t)||!t.getBounds||!t.getBounds())return void zog("zim pages - Pages():\nobject must have bounds set");zot(o)&&(o=[]),zot(i)&&(i="none"),zot(n)&&(n=200),zot(a)&&(a=[]),this.transitionTable=a,this.speed=n,this.active=!0;var s,d,h=this,l=t.getBounds().width,u=t.getBounds().height,c=this.page=o[0]?o[0].page:null;("none"!=i||a!=[])&&r();for(var g,p,f=["left","right","up","down"],m=0;m<o.length;m++)g=o[m],g.page.zimSwipeArray=g.swipe?g.swipe:[];this.addChild(c),this.swipe=new e.Swipe(t);var v,z=!1,b=this.swipe.on("swipe",function(e){if(h.active){var t=e.currentTarget.direction;if("none"!=t){var o="";"left"==t?o="right":"right"==t?o="left":"up"==t?o="down":"down"==t&&(o="up"),t=o;var i=f.indexOf(t);p=c.zimSwipeArray[i],v=[p,t,null,null,!0],h.page=c,h.nextPage=p,h.direction=t,h.dispatchEvent("swipe"),setTimeout(function(){z||h.go(p,t,null,null,!0)},50)}}});this.addPage=function(e,t){zot(t)&&(t=[]);var o={page:e,swipe:t};o.page.zimSwipeArray=o.swipe?o.swipe:[],c||(c=h.page=o.page,h.addChild(c))},this.removePage=function(e){h.currentPage==e&&(h.removeChild(e),t.getStage()&&t.getStage().update()),e.zimSwipeArray=null},this.setSwipe=function(e,t){zot(t)&&(t=[]);var o={page:e,swipe:t};o.page.zimSwipeArray=o.swipe?o.swipe:[]},this.pause=function(){z=!0},this.unpause=function(){z&&h.go(v[0],v[1],v[2],v[3],v[4])},this.go=function(o,a,r,g,p){function m(e){e[0].uncache(),e[1].uncache(),h.dispatchEvent("pageTransitioned"),h.removeChild(h.lastPage),h.removeChild(s),h.removeChild(d)}function v(t){h.removeChild(h.lastPage),e.animate(t.unshift(),{alpha:0},h.speed/2,null,m,t)}setTimeout(function(){z=!1},200);for(var b=[{x:l},{x:-l},{y:u},{y:-u}],w=[{x:0},{x:0},{y:0},{y:0}],y=[{x:l/2,alpha:0},{x:-l/2,alpha:0},{y:u/2,alpha:0},{y:-u/2,alpha:0}],x=i,B=n,C=0;C<h.transitionTable.length;C++)if(h.transitionTable[C][0]==c&&h.transitionTable[C][1]==o){x=h.transitionTable[C][2],B=h.transitionTable[C][3];break}if(zot(r)&&(r=x),zot(g)&&(g=B),h.speed=g,h.direction=a,""==o||null==o)h.page=c,h.dispatchEvent("nothing");else if("string"==typeof o)h.page=c,h.dispatchEvent(o);else{if(o==c)return;zot(a)&&(a="right");var S=f.indexOf(a);o.x=0,o.y=0,o.alpha=1,"slide"==r?(o.x=-(0|b[S].x),o.y=-(0|b[S].y),o.cache(0,0,l+1,u+1),c.cache(0,0,l+1,u+1),h.addChild(o),h.addChild(c),e.animate(c,b[S],h.speed,null,m,[c,o]),e.animate(o,w[S],h.speed)):"reveal"==r?(o.cache(0,0,l+1,u+1),c.cache(0,0,l+1,u+1),h.addChild(o),h.addChild(c),e.animate(c,y[S],h.speed,null,m,[c,o])):"fade"==r?(o.cache(0,0,l+1,u+1),c.cache(0,0,l+1,u+1),o.alpha=1,h.addChild(o),h.addChild(c),e.animate(c,{alpha:0},h.speed,null,m,[c,o])):"black"==r?(o.cache(0,0,l+1,u+1),c.cache(0,0,l+1,u+1),o.alpha=1,h.addChild(o),h.addChild(c),s.alpha=0,h.addChild(s),e.animate(s,{alpha:1},h.speed/2,null,v,[s,c,o])):"white"==r?(o.cache(0,0,l+1,u+1),c.cache(0,0,l+1,u+1),o.alpha=1,h.addChild(o),h.addChild(c),d.alpha=0,h.addChild(d),e.animate(d,{alpha:1},h.speed/2,null,v,[d,c,o])):(h.addChild(o),h.removeChild(c)),h.lastPage=c,h.page=o,zot(p)&&(p=!1),h.fromSwipe=p,h.dispatchEvent("page"),c=o,t.getStage()&&t.getStage().update()}},this.resize=function(){l=t.getBounds().width,u=t.getBounds().height,("none"!=i||a!=[])&&r()},this.puff=function(e){for(var t=0;t<o.length;t++)h.addChild(o[t].page);h.addChild(c),e>0&&setTimeout(function(){h.settle()},e)},this.settle=function(){h.removeAllChildren(),h.addChild(c),h.dispatchEvent("puffed")},this.disable=function(){h.active=!1},this.enable=function(){h.active=!0},this.dispose=function(){h.swipe.off("swipe",b),h.removeAllChildren(),o=null}}return r.prototype=new createjs.Container,r.prototype.constructor=e.Pages,new r},e.HotSpots=function(t,o,i){function n(){function n(t){var n=null;if(!Array.isArray(t.rect)){if(n=t.rect,!n)return void zog("zim pages - HotSpots(): HotSpot "+t.page+" "+t.rect+" button does not exist");if(!n.getBounds())return void zog("zim pages - HotSpots(): HotSpots button needs bounds");t.rect=[n.x,n.y,n.getBounds().width,n.getBounds().height]}s=new e.HotSpot(t.page,t.rect[0],t.rect[1],t.rect[2],t.rect[3],t.call,o),s.zimHSpage=t.page,s.button=n,d.push(s),s.on("click",a),n&&(s.spot.mouseEnabled=!1,s.spot.mouseChildren=!1,n.zimHScall=t.call,n.zimHSEvent=n.on("click",a),i||(n.zimHSMDEvent=n.on("mousedown",function(e){e.stopImmediatePropagation()})),n.cursor="pointer")}function a(e){"function"==typeof e.currentTarget.zimHScall&&e.currentTarget.zimHScall()}if(zot(t)||!Array.isArray(t))return void zog("zim pages - HotSpots():\nplease provide an array of HotSpot data");zot(o)&&(o=!0),zot(i)&&(i=!1);for(var r,s,d=[],h=0;h<t.length;h++)n(t[h]);this.addHotSpot=function(e,o,i){r={page:e,rect:o,call:i},t.push(r),n(r)},this.show=function(){for(var e=0;e<d.length;e++)s=d[e],s.button||s.show()},this.hide=function(){for(var e=0;e<d.length;e++)s=d[e],s.hide()},this.removeHotSpots=function(o,i){for(var n=t.length-1;n>=0;n--)r=t[n],s=d[n],i&&!Array.isArray(i)&&(i=[i.x,i.y,i.getBounds().width,i.getBounds().height]),(zot(o)&&zot(i)||zot(i)&&o==r.page||zot(o)&&e.arraysEqual(i,r.rect)||o==r.page&&e.arraysEqual(i,r.rect))&&(t.splice(n,1),s.button&&(s.button.off("click",s.button.zimHSEvent),s.button.zimHSEvent=null),s.off("click",a),s.dispose(),d.splice(n,1))},this.dispose=function(){for(var e=0;e<d.length;e++)s=d[e],s.button&&(s.button.off("click",s.button.zimHSEvent),s.button.zimHSCall=null,s.button.zimHSEvent=null),s.off("click",a),s.dispose()}}return n.prototype=new createjs.Container,n.prototype.constructor=e.HotSpots,new n},e.HotSpot=function(t,o,i,n,a,r,s){function d(){if(zot(t)||!t.addChild)return void zog("zim pages - HotSpot():\nPlease pass in container object for obj");t instanceof createjs.Container==0&&zog("zim build - HotSpot():\nObjects passed in should be Containers"),zot(s)&&(s=!0);var e=new createjs.Shape;if(this.spot=e,s)e.graphics.f("#999999").dr(o,i,n,a);else{var d=t.globalToLocal(o,i),h=t.globalToLocal(o+n,i+a),l=h.x-d.x,u=h.y-d.y;e.graphics.f("#999999").dr(d.x,d.y,l,u)}e.alpha=.01,e.cursor="pointer";var c=e.on("click",function(){"function"==typeof r&&r()});t.addChild(e),this.show=function(){e.alpha=.5},this.hide=function(){e.alpha=.01},this.dispose=function(){e.off("click",c),t.removeChild(e),delete e}}return d.prototype=new createjs.Container,d.prototype.constructor=e.HotSpot,new d},e.dashedLinesOn=function(){e.dashed||(e.dashed=!0,createjs.Graphics.prototype.dashedLineTo=function(e,t,o,i,n){this.moveTo(e,t);
for(var a=o-e,r=i-t,s=Math.floor(Math.sqrt(a*a+r*r)/n),d=a/s,h=r/s,l=0;l++<s;)e+=d,t+=h,this[l%2==0?"moveTo":"lineTo"](e,t);return this[l%2==0?"moveTo":"lineTo"](o,i),this},createjs.Graphics.prototype.drawDashedRect=function(e,t,o,i,n){this.moveTo(e,t);var a=e+o,r=t+i;return this.dashedLineTo(e,t,a,t,n),this.dashedLineTo(a,t,a,r,n),this.dashedLineTo(a,r,e,r,n),this.dashedLineTo(e,r,e,t,n),this})},e.Manager=function(e){zon&&e&&zog("zim pages - "+e);var t=this;this.items=[],this.add=function(e){t.items.push(e)},this.resize=function(){if(t)for(var e=0;e<t.items.length;e++)t.items[e].resize()||t.items.splice(e)},this.dispose=function(){for(var o=0;o<t.items.length;o++)t.items[o].dispose();t.items=[],zon&&zog("zim pages - "+e+" - all disposed"),t=null}},e.Guide=function(t,o,i,n,a){function r(){function r(e,t,o){var i=new createjs.Container;return i.shape=new createjs.Shape,i.shape.graphics.s(t).ss(1).f(e).r(0,0,v,z),i.shape.alpha=.9,i.addChild(i.shape),i.label=new createjs.Text("10","16px verdana",o),i.label.textAlign="center",i.label.textBaseline="middle",i.addChild(i.label),i.mouseChildren=!1,i.mouseEnabled=!1,i}function s(){clearInterval(S),"stage"==t?(u=g.getStage(),t=u):u=t.getStage(),y=t.getBounds().width,x=t.getBounds().height,o?(m.y=x/2,m.label.text="y:"+(g.pixels?Math.round(70*y/100):"70%")):(m.x=y/2,m.label.text="x:"+(g.pixels?Math.round(70*x/100):"70%")),B=new createjs.Shape,g.addChild(B),o?B.x=.7*y:B.y=.7*x,M||(t.addChild(g),h()),u.off("stagemousemove",c),c=u.on("stagemousemove",d),u.update()}function d(e){var n,a;e?(n=t.globalToLocal(e.rawX,e.rawY),j=n):n={x:j.x,y:j.y},i?o?(a=Math.round(Math.abs(n.x-B.x)/y*100),m.label.text="x:"+Math.max(0,Math.min(a,100))+"%",m.y=Math.max(w,Math.min(n.y,f))):(a=Math.round(Math.abs(n.y-B.y)/x*100),m.label.text="y:"+Math.max(0,Math.min(a,100))+"%",m.x=Math.max(b,Math.min(n.x,p))):o?(a=Math.round(Math.abs(n.x-B.x)),m.label.text="x:"+Math.max(0,Math.min(a,Math.round(y))),m.y=Math.max(w,Math.min(n.y,f))):(a=Math.round(Math.abs(n.y-B.y)),m.label.text="y:"+Math.max(0,Math.min(a,Math.round(x))),m.x=Math.max(b,Math.min(n.x,p))),u&&u.update()}function h(){M=!0,y=t.getBounds().width,x=t.getBounds().height;var i;o?(i="ew-resize",C=new createjs.Rectangle(0,0,y,0)):(i="ns-resize",C=new createjs.Rectangle(0,0,0,x)),e.noDrag(B),setTimeout(function(){e.drag(B,C,i,i,null,null,!0)},500),u.mouseMoveOutside=!0,u.enableMouseOver(10),p=y-2*v/3,f=x-z-z,B.uncache();var n=B.graphics;o?(n.c().s("rgba(0,255,255,.1)").ss(20).mt(0,0).lt(0,x),n.f().s("white").ss(2).mt(0,0).lt(0,x),n.s("#00c5af").ss(2).dashedLineTo(0,0,0,x,20),B.cache(-10,0,20,x)):(n.c().s("rgba(255,0,255,.1)").ss(20).mt(0,0).lt(y,0),n.f().s("white").ss(2).mt(0,0).lt(y,0),n.s("#d61fa0").ss(2).dashedLineTo(0,0,y,0,20),B.cache(0,-10,y,20)),o?m.x=y:m.y=x,g.addChild(m)}function l(e){e||(e=event),u&&(String.fromCharCode(e.keyCode)==n.toUpperCase()&&(g.visible=!g.visible,u.off("stagemousemove",c),g.visible&&(c=u.on("stagemousemove",d,g)),u.update()),String.fromCharCode(e.keyCode)==a.toUpperCase()&&(g.pixels=!g.pixels))}if(zot(t)&&(t="stage"),zot(o)&&(o=!0),!("stage"==t||t.getBounds&&t.getBounds()))return void zog("zim pages - Guide(): Please provide bounds for the obj (setBounds())");zot(i)&&(i=!0),zot(n)&&(n="G"),zot(a)&&(a="P");var u,c,g=this;e.dashedLinesOn();var p,f,m,v=80,z=26,b=v/6+v/2,w=2*z;o?(m=r("#00c5af","white","white"),m.shape.regX=v+v/6,m.shape.regY=z/2,m.label.x=-v/2-v/6):(m=r("#d61fa0","white","white"),m.shape.regX=v/2,m.shape.regY=z+z/4,m.label.y=3*-z/4);var y,x,B,C,S=setInterval(function(){"stage"==t?g&&g.getStage()&&s():t&&t.getStage()&&s()},100),M=!1,j={x:0,y:0};Object.defineProperty(this,"pixels",{get:function(){return!i},set:function(e){i=!e,g.resize()}}),window.addEventListener("keydown",l),this.resize=function(){return g?(u&&(h(),d()),!0):!1},this.dispose=function(){return g?(e.noDrag(B),clearInterval(S),g.removeAllChildren(),window.removeEventListener("keydown",l),g.parent&&g.parent.removeChild(g),g=null,!0):!1}}return r.prototype=new createjs.Container,r.prototype.constructor=e.Guide,new r},e.GuideManager=function(){e.Manager.call(this,"GuideManager")},e.GuideManager.prototype=new e.Manager,e.GuideManager.constructor=e.GuideManager,e.Grid=function(t,o,i,n,a){function r(){function e(e,t,o){var i=new createjs.Container;return i.shape=new createjs.Shape,i.shape.graphics.s(t).ss(1).f(e).r(0,0,p,f),i.shape.alpha=.9,i.addChild(i.shape),i.label=new createjs.Text("10","16px verdana",o),i.label.textAlign="center",i.label.textBaseline="middle",i.addChild(i.label),i.mouseChildren=!1,i.mouseEnabled=!1,i}function r(){clearInterval(S),"stage"==t?(l=c.getStage(),t=l):l=t.getStage(),M||(d(),t.addChild(c)),l.off("stagemousemove",u),u=l.on("stagemousemove",s),l.update()}function s(e){var o;e?(o=t.globalToLocal(e.rawX,e.rawY),j=o):o={x:j.x,y:j.y},i?(m.label.text="x:"+Math.max(0,Math.min(Math.round(o.x/x*100),100))+"%",m.x=Math.max(w,Math.min(o.x,z)),v.label.text="y:"+Math.max(0,Math.min(Math.round(o.y/B*100),100))+"%",v.y=Math.max(y,Math.min(o.y,b))):(m.label.text="x:"+Math.max(0,Math.min(Math.round(o.x),Math.round(x))),m.x=Math.max(w,Math.min(o.x,z)),v.label.text="y:"+Math.max(0,Math.min(Math.round(o.y),Math.round(B))),v.y=Math.max(y,Math.min(o.y,b))),l&&l.update()}function d(){M=!0,x=t.getBounds().width,B=t.getBounds().height,l.mouseMoveOutside=!0,l.enableMouseOver(10),z=x-2*p/3,b=B-f-f,C=new createjs.Container,c.addChild(C);var e=new createjs.Shape;C.addChild(e);var n=e.graphics;n.s(o).ss(1);var a=new createjs.Shape;if(C.addChild(a),i){for(var r=1;22>r;r++)n.mt(r*x/20,0).lt(r*x/20,B);for(var r=1;20>r;r++)n.mt(0,r*B/20).lt(x,r*B/20);e.alpha=.3,n=a.graphics,n.s(o).ss(1);for(var r=1;10>r;r++)n.mt(r*x/10,0).lt(r*x/10,B);for(var r=1;10>r;r++)n.mt(0,r*B/10).lt(x,r*B/10)}else{for(var r=0;x/g>r;r++)n.mt(r*g,0).lt(r*g,B);for(var r=0;B/g>r;r++)n.mt(0,r*g).lt(x,r*g);e.alpha=.3,n=a.graphics,n.s(o).ss(1);for(var r=0;x/(10*g)>r;r++)n.mt(10*r*g,0).lt(10*r*g,B);for(var r=0;B/(10*g)>r;r++)n.mt(0,10*r*g).lt(x,10*r*g)}var s=80;n.s("#FFFFFF").ss(8),n.mt(x/2,B/2-s/2).lt(x/2,B/2+s/2),n.mt(x/2-s/2,B/2).lt(x/2+s/2,B/2),n.s("#000000").ss(4),n.mt(x/2,B/2-s/2).lt(x/2,B/2+s/2),n.mt(x/2-s/2,B/2).lt(x/2+s/2,B/2),n.s(o).ss(3),n.dr(0,0,x,B),a.alpha=.5,C.cache(0,0,x,B),c.addChild(m),c.addChild(v),l.update()}function h(e){e||(e=event),l&&(String.fromCharCode(e.keyCode)==n.toUpperCase()&&(c.visible=!c.visible,l.off("stagemousemove",u),c.visible&&(u=l.on("stagemousemove",s,c)),l.update()),String.fromCharCode(e.keyCode)==a.toUpperCase()&&(c.removeChild(C),C=null,c.pixels=!c.pixels))}if(zot(t)&&(t="stage"),zot(o)&&(o="black"),!("stage"==t||t.getBounds&&t.getBounds()))return void zog("zim pages - Grid(): Please provide bounds for the obj (setBounds())");zot(i)&&(i=!0),zot(n)&&(n="G"),zot(a)&&(a="P");var l,u,c=this,g=10;this.mouseChildren=!1,this.mouseEnabled=!1;var p=80,f=26,m=e("#dddddd",o,"#333333");m.shape.regX=p/2,m.shape.regY=-f/4,m.label.y=3*f/4;var v=e("#dddddd",o,"#333333");v.shape.regX=-p/6,v.shape.regY=f/2,v.label.x=p/2+p/6;var z,b,w=p/6+p/2,y=2*f;m.x=w,v.y=y,m.label.text="x:0",v.label.text="y:0";var x,B,C,S=setInterval(function(){"stage"==t?c&&c.getStage()&&r():t&&t.getStage()&&r()},100),M=!1,j={x:0,y:0};Object.defineProperty(this,"pixels",{get:function(){return!i},set:function(e){i=!e,c.resize()}}),window.addEventListener("keydown",h),this.resize=function(){c.removeChild(C),C=null,l&&(d(),s(),setTimeout(function(){c.removeChild(C),C=null,d()},200))},this.dispose=function(){clearInterval(S),c.removeAllChildren(),window.removeEventListener("keydown",h),c.parent&&c.parent.removeChild(c),c=null}}return r.prototype=new createjs.Container,r.prototype.constructor=e.Grid,new r},e.GridManager=function(){e.Manager.call(this,"GridManager")},e.GridManager.prototype=new e.Manager,e.GridManager.constructor=e.GridManager,e.Layout=function(t,o,i,n,a,r,s,d){function h(){function h(){for(var e=0,t=0;t<o.length;t++)p=o[t],p.given=0,0==p[v]&&(e+=p.object.getBounds()[v]);for(var t=0;t<o.length;t++)p=o[t],0==p[v]&&(p.given=p.object.getBounds()[v]/e*C)}function l(e){e||(e=event),r&&String.fromCharCode(e.keyCode)==d.toUpperCase()&&(r.visible=!r.visible,r.getStage()&&r.getStage().update())}if(zot(t)||!t.getBounds)return void zog("zim pages - Layout(): please provide an object with bounds set that holds the objects being laid out");if(s=zot(s)?t:s,!s.getBounds||!s.getBounds())return void zog("zim pages - Layout(): holder must have bounds set or provide a scalingObject with bounds");var u=s.getBounds();t.setBounds(0,0,u.width,u.height),zot(i)&&(i=0),zot(a)&&(a=!0),zot(n)&&(n=""),zot(d)&&(d="B"),e.dashedLinesOn();var c=new createjs.Shape,g=this;this.active=!0;var p,f=0,m="minWidth",v="width",z="height",b="marginLeft",w="maxHeight",y="x",x="y";a&&(m="minHeight",v="height",z="width",b="marginTop",w="maxWidth",y="y",x="x");for(var B=0;B<o.length;B++){if(p=o[B],!p.object||!p.object.getBounds())return void zog("zim pages - Layout(): each region object must have an object with setBounds() set");p[m]||(p[m]=0),p[v]||(p[v]=0),p.backgroundColor||(p.backgroundColor=""),p.given=0,p.maxGiven=0,p[b]||(p[b]=0),p[w]||(p[w]=100),a?(p.align||(p.align="middle"),p.valign||(p.valign=0==B?"top":B==o.length-1?"bottom":"middle",1==o.length&&(p.valign="middle"))):(p.valign||(p.valign="top"),p.align||(p.align=0==B?"left":B==o.length-1?"right":"middle",1==o.length&&(p.align="middle"))),p[v]&&(p[m]=0),f+=p[v]+p[b]}if(f+=i,f>100)return void zog("zim pages - Layout(): cannot fit regions into 100% bounds");var C=100-f;h(),this.resize=function(){if(g.active){u=s.getBounds(),t.setBounds(0,0,u.width,u.height),c.graphics.clear(),""!=n&&c.graphics.f(n).r(0,0,u.width,u.height);for(var d=0;d<o.length;d++)p=o[d],p.maxGiven=0,p.marginGiven=0;for(var l,y,x,B,S,M,j,T=!0,k=C;T;){y=0,T=!1,l=!0;for(var d=0;d<o.length;d++)p=o[d],p.given>0&&0==p.maxGiven&&(x=p.object.getBounds()[v],B=p.object.getBounds()[z],S=p.given*u[v]/100,M=p[w]*u[z]/100,j=B/x*S,j>M?(T=!0,p.maxGiven=x/B*M*100/u[v],y+=p.given-p.maxGiven,k-=p.maxGiven):l=!1);if(!T)break;if(l)break;totalPrimaries=0;for(var d=0;d<o.length;d++)p=o[d],0==p[v]&&0==p.maxGiven&&(totalPrimaries+=p.object.getBounds()[v]);for(var d=0;d<o.length;d++)p=o[d],0==p[v]&&0==p.maxGiven&&(p.given=p.object.getBounds()[v]/totalPrimaries*k)}var L=!0;if(p=o[0],p.maxGiven>0?p.maxGiven<p[m]&&(p[v]=p[m],L=!1):p.given>0&&p.given<p[m]&&(p[v]=p[m],L=!1),p=o[o.length-1],p.maxGiven>0?p.maxGiven<p[m]&&(p[v]=p[m],L=!1):p.given>0&&p.given<p[m]&&(p[v]=p[m],L=!1),!L){f=0;for(var d=0;d<o.length;d++)p=o[d],f+=p[v]+p[b];return f+=i,f>100?void zog("zim build - Layout(): cannot fit regions into 100% bounds"):(C=100-f,h(),void g.resize())}for(var P=!0,E=0,G=0,d=0;d<o.length;d++)p=o[d],E+=p[b],p[v]>0?G+=p[v]:p.maxGiven>0?G+=p.maxGiven:p.given>0&&(G+=p.given),0==p[v]&&(P=!1);if(P||l){E+=i;var A=100-G-E;if(E-=i+o[0][b],0!=A&&0!=E)for(var d=0;d<o.length;d++)0!=d&&(p=o[d],p.marginGiven=p[b]/E*(E+A))}var x,B,X,Y,I,H=0,R=0;if(r&&r.graphics){var D=r.graphics;D.c()}for(var d=0;d<o.length;d++)p=o[d],H+=p.marginGiven>0?p.marginGiven*u[v]/100:p[b]*u[v]/100,x=p[v]>0?p[v]:p.maxGiven>0?p.maxGiven:p.given>0?p.given:0,x=x*u[v]/100,B=p[w]*u[z]/100,R=(u[z]-B)/2,X=a?e.fit(p.object,R,H,B,x):e.fit(p.object,H,R,x,B),"top"==p.valign?p.object.y=X.bY:"bottom"==p.valign&&(p.object.y=X.bY+X.bHeight-X.height),"left"==p.align?p.object.x=X.bX:"right"==p.align&&(p.object.x=X.bX+X.bWidth-X.width),r&&r.graphics&&(D.s("white").ss(2).r(X.bX,X.bY,X.bWidth,X.bHeight),D.s("#ff8203").ss(2).drawDashedRect(X.bX,X.bY,X.bWidth,X.bHeight,20)),I=Y=0,(0==H||H+x==u[v])&&(a?I=1:Y=1),B==u[z]&&(a?Y=1:I=1),""!=p.backgroundColor&&c.graphics.f(p.backgroundColor).r(X.bX,X.bY,X.bWidth+Y,X.bHeight+I),H+=x}},this.resize(),r&&t.addChild(r),t.addChildAt(c,0),window.addEventListener("keydown",l),this.disable=function(){g.active=!1,window.removeEventListener("keydown",l),r&&(r.alpha=0)},this.enable=function(){g.active=!0,window.addEventListener("keydown",l),g.resize(),r&&(r.alpha=1)},this.removeShape=function(){r&&(r.graphics.clear(),t.removeChild(r),r=null,r=!1),window.removeEventListener("keydown",l)},this.addShape=function(e){g.removeShape(),r=e,window.addEventListener("keydown",l),t.addChild(r),g.resize()},this.dispose=function(){g.removeShape()}}return h.prototype=new createjs.EventDispatcher,h.prototype.constructor=e.Layout,new h},e.LayoutManager=function(){zon&&zog("zim pages - LayoutManager");var e=this;this.items=[],this.add=function(t){e.items.push(t)},this.resize=function(){for(var t=0;t<e.items.length;t++)e.items[t].resize()},this.disable=function(){for(var t=0;t<e.items.length;t++)e.items[t].disable()},this.enable=function(){for(var t=0;t<e.items.length;t++)e.items[t].enable()},this.dispose=function(){for(var t=0;t<e.items.length;t++)e.items[t].removeShape()}},e}(zim||{});